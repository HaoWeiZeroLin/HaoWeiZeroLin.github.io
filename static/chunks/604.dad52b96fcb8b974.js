(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[604],{32264:function(e,t,r){"use strict";let{AbortError:i,codes:n}=r(64385),{isNodeStream:a,isWebStream:o,kControllerErrorFunction:s}=r(66909),l=r(94906),{ERR_INVALID_ARG_TYPE:d}=n,validateAbortSignal=(e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new d(t,"AbortSignal",e)};e.exports.addAbortSignal=function(t,r){if(validateAbortSignal(t,"signal"),!a(r)&&!o(r))throw new d("stream",["ReadableStream","WritableStream","Stream"],r);return e.exports.addAbortSignalNoValidate(t,r)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;let r=a(t)?()=>{t.destroy(new i(void 0,{cause:e.reason}))}:()=>{t[s](new i(void 0,{cause:e.reason}))};return e.aborted?r():(e.addEventListener("abort",r),l(t,()=>e.removeEventListener("abort",r))),t}},57231:function(e,t,r){"use strict";let{StringPrototypeSlice:i,SymbolIterator:n,TypedArrayPrototypeSet:a,Uint8Array:o}=r(57156),{Buffer:s}=r(48764),{inspect:l}=r(70780);e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){let t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;let e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return s.alloc(0);let t=s.allocUnsafe(e>>>0),r=this.head,i=0;for(;r;)a(t,r.data,i),i+=r.data.length,r=r.next;return t}consume(e,t){let r=this.head.data;if(e<r.length){let t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[n](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",r=this.head,n=0;do{let a=r.data;if(e>a.length)t+=a,e-=a.length;else{e===a.length?(t+=a,++n,r.next?this.head=r.next:this.head=this.tail=null):(t+=i(a,0,e),this.head=r,r.data=i(a,e));break}++n}while(null!==(r=r.next));return this.length-=n,t}_getBuffer(e){let t=s.allocUnsafe(e),r=e,i=this.head,n=0;do{let s=i.data;if(e>s.length)a(t,s,r-e),e-=s.length;else{e===s.length?(a(t,s,r-e),++n,i.next?this.head=i.next:this.head=this.tail=null):(a(t,new o(s.buffer,s.byteOffset,e),r-e),this.head=i,i.data=s.slice(e));break}++n}while(null!==(i=i.next));return this.length-=n,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return l(this,{...t,depth:0,customInspect:!1})}}},96171:function(e,t,r){"use strict";let{pipeline:i}=r(6729),n=r(96665),{destroyer:a}=r(39201),{isNodeStream:o,isReadable:s,isWritable:l,isWebStream:d,isTransformStream:u,isWritableStream:c,isReadableStream:h}=r(66909),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:b}}=r(64385),m=r(94906);e.exports=function(...e){let t,r,y,g,w;if(0===e.length)throw new b("streams");if(1===e.length)return n.from(e[0]);let _=[...e];if("function"==typeof e[0]&&(e[0]=n.from(e[0])),"function"==typeof e[e.length-1]){let t=e.length-1;e[t]=n.from(e[t])}for(let t=0;t<e.length;++t)if(o(e[t])||d(e[t])){if(t<e.length-1&&!(s(e[t])||h(e[t])||u(e[t])))throw new p(`streams[${t}]`,_[t],"must be readable");if(t>0&&!(l(e[t])||c(e[t])||u(e[t])))throw new p(`streams[${t}]`,_[t],"must be writable")}let S=e[0],v=i(e,function(e){let t=g;g=null,t?t(e):e?w.destroy(e):T||A||w.destroy()}),A=!!(l(S)||c(S)||u(S)),T=!!(s(v)||h(v)||u(v));if(w=new n({writableObjectMode:!!(null!=S&&S.writableObjectMode),readableObjectMode:!!(null!=v&&v.writableObjectMode),writable:A,readable:T}),A){if(o(S))w._write=function(e,r,i){S.write(e,r)?i():t=i},w._final=function(e){S.end(),r=e},S.on("drain",function(){if(t){let e=t;t=null,e()}});else if(d(S)){let e=u(S)?S.writable:S,t=e.getWriter();w._write=async function(e,r,i){try{await t.ready,t.write(e).catch(()=>{}),i()}catch(e){i(e)}},w._final=async function(e){try{await t.ready,t.close().catch(()=>{}),r=e}catch(t){e(t)}}}let e=u(v)?v.readable:v;m(e,()=>{if(r){let e=r;r=null,e()}})}if(T){if(o(v))v.on("readable",function(){if(y){let e=y;y=null,e()}}),v.on("end",function(){w.push(null)}),w._read=function(){for(;;){let e=v.read();if(null===e){y=w._read;return}if(!w.push(e))return}};else if(d(v)){let e=u(v)?v.readable:v,t=e.getReader();w._read=async function(){for(;;)try{let{value:e,done:r}=await t.read();if(!w.push(e))return;if(r){w.push(null);return}}catch{return}}}}return w._destroy=function(e,i){e||null===g||(e=new f),y=null,t=null,r=null,null===g?i(e):(g=i,o(v)&&a(v,e))},w}},39201:function(e,t,r){"use strict";let i=r(34155),{aggregateTwoErrors:n,codes:{ERR_MULTIPLE_CALLBACK:a},AbortError:o}=r(64385),{Symbol:s}=r(57156),{kDestroyed:l,isDestroyed:d,isFinished:u,isServerRequest:c}=r(66909),h=s("kDestroy"),f=s("kConstruct");function checkError(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function _destroy(e,t,r){let n=!1;function onDestroy(t){if(n)return;n=!0;let a=e._readableState,o=e._writableState;checkError(t,o,a),o&&(o.closed=!0),a&&(a.closed=!0),"function"==typeof r&&r(t),t?i.nextTick(emitErrorCloseNT,e,t):i.nextTick(emitCloseNT,e)}try{e._destroy(t||null,onDestroy)}catch(e){onDestroy(e)}}function emitErrorCloseNT(e,t){emitErrorNT(e,t),emitCloseNT(e)}function emitCloseNT(e){let t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=r&&r.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function emitErrorNT(e,t){let r=e._readableState,i=e._writableState;null!=i&&i.errorEmitted||null!=r&&r.errorEmitted||(i&&(i.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function errorOrDestroy(e,t,r){let n=e._readableState,a=e._writableState;if(null!=a&&a.destroyed||null!=n&&n.destroyed)return this;null!=n&&n.autoDestroy||null!=a&&a.autoDestroy?e.destroy(t):t&&(t.stack,a&&!a.errored&&(a.errored=t),n&&!n.errored&&(n.errored=t),r?i.nextTick(emitErrorNT,e,t):emitErrorNT(e,t))}function constructNT(e){let t=!1;function onConstruct(r){if(t){errorOrDestroy(e,null!=r?r:new a);return}t=!0;let n=e._readableState,o=e._writableState,s=o||n;n&&(n.constructed=!0),o&&(o.constructed=!0),s.destroyed?e.emit(h,r):r?errorOrDestroy(e,r,!0):i.nextTick(emitConstructNT,e)}try{e._construct(e=>{i.nextTick(onConstruct,e)})}catch(e){i.nextTick(onConstruct,e)}}function emitConstructNT(e){e.emit(f)}function isRequest(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function emitCloseLegacy(e){e.emit("close")}function emitErrorCloseLegacy(e,t){e.emit("error",t),i.nextTick(emitCloseLegacy,e)}e.exports={construct:function(e,t){if("function"!=typeof e._construct)return;let r=e._readableState,n=e._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),e.once(f,t),e.listenerCount(f)>1||i.nextTick(constructNT,e)},destroyer:function(e,t){!(!e||d(e))&&(t||u(e)||(t=new o),c(e)?(e.socket=null,e.destroy(t)):isRequest(e)?e.abort():isRequest(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?i.nextTick(emitErrorCloseLegacy,e,t):i.nextTick(emitCloseLegacy,e),e.destroyed||(e[l]=!0))},destroy:function(e,t){let r=this._readableState,i=this._writableState,a=i||r;return null!=i&&i.destroyed||null!=r&&r.destroyed?"function"==typeof t&&t():(checkError(e,i,r),i&&(i.destroyed=!0),r&&(r.destroyed=!0),a.constructed?_destroy(this,e,t):this.once(h,function(r){_destroy(this,n(r,e),t)})),this},undestroy:function(){let e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy}},96665:function(e,t,r){"use strict";let i,n;let{ObjectDefineProperties:a,ObjectGetOwnPropertyDescriptor:o,ObjectKeys:s,ObjectSetPrototypeOf:l}=r(57156);e.exports=Duplex;let d=r(47950),u=r(39713);l(Duplex.prototype,d.prototype),l(Duplex,d);{let e=s(u.prototype);for(let t=0;t<e.length;t++){let r=e[t];Duplex.prototype[r]||(Duplex.prototype[r]=u.prototype[r])}}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);d.call(this,e),u.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}function lazyWebStreams(){return void 0===i&&(i={}),i}a(Duplex.prototype,{writable:{__proto__:null,...o(u.prototype,"writable")},writableHighWaterMark:{__proto__:null,...o(u.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...o(u.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...o(u.prototype,"writableBuffer")},writableLength:{__proto__:null,...o(u.prototype,"writableLength")},writableFinished:{__proto__:null,...o(u.prototype,"writableFinished")},writableCorked:{__proto__:null,...o(u.prototype,"writableCorked")},writableEnded:{__proto__:null,...o(u.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...o(u.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),Duplex.fromWeb=function(e,t){return lazyWebStreams().newStreamDuplexFromReadableWritablePair(e,t)},Duplex.toWeb=function(e){return lazyWebStreams().newReadableWritablePairFromDuplex(e)},Duplex.from=function(e){return n||(n=r(87687)),n(e,"body")}},87687:function(e,t,r){"use strict";let i=r(34155),n=r(48764),{isReadable:a,isWritable:o,isIterable:s,isNodeStream:l,isReadableNodeStream:d,isWritableNodeStream:u,isDuplexNodeStream:c}=r(66909),h=r(94906),{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:b}}=r(64385),{destroyer:m}=r(39201),y=r(96665),g=r(47950),{createDeferredPromise:w}=r(70780),_=r(24545),S=globalThis.Blob||n.Blob,v=void 0!==S?function(e){return e instanceof S}:function(e){return!1},A=globalThis.AbortController||r(28599).AbortController,{FunctionPrototypeCall:T}=r(57156);let Duplexify=class Duplexify extends y{constructor(e){super(e),(null==e?void 0:e.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(null==e?void 0:e.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};function _duplexify(e){let t,r,i,n,s;let l=e.readable&&"function"!=typeof e.readable.read?g.wrap(e.readable):e.readable,d=e.writable,u=!!a(l),c=!!o(d);function onfinished(e){let t=n;n=null,t?t(e):e&&s.destroy(e)}return s=new Duplexify({readableObjectMode:!!(null!=l&&l.readableObjectMode),writableObjectMode:!!(null!=d&&d.writableObjectMode),readable:u,writable:c}),c&&(h(d,e=>{c=!1,e&&m(l,e),onfinished(e)}),s._write=function(e,r,i){d.write(e,r)?i():t=i},s._final=function(e){d.end(),r=e},d.on("drain",function(){if(t){let e=t;t=null,e()}}),d.on("finish",function(){if(r){let e=r;r=null,e()}})),u&&(h(l,e=>{u=!1,e&&m(l,e),onfinished(e)}),l.on("readable",function(){if(i){let e=i;i=null,e()}}),l.on("end",function(){s.push(null)}),s._read=function(){for(;;){let e=l.read();if(null===e){i=s._read;return}if(!s.push(e))return}}),s._destroy=function(e,a){e||null===n||(e=new f),i=null,t=null,r=null,null===n?a(e):(n=a,m(d,e),m(l,e))},s}e.exports=function duplexify(e,t){if(c(e))return e;if(d(e))return _duplexify({readable:e});if(u(e))return _duplexify({writable:e});if(l(e))return _duplexify({writable:!1,readable:!1});if("function"==typeof e){let{value:r,write:n,final:a,destroy:o}=function(e){let{promise:t,resolve:r}=w(),n=new A,a=n.signal,o=e(async function*(){for(;;){let e=t;t=null;let{chunk:n,done:o,cb:s}=await e;if(i.nextTick(s),o)return;if(a.aborted)throw new f(void 0,{cause:a.reason});({promise:t,resolve:r}=w()),yield n}}(),{signal:a});return{value:o,write(e,t,i){let n=r;r=null,n({chunk:e,done:!1,cb:i})},final(e){let t=r;r=null,t({done:!0,cb:e})},destroy(e,t){n.abort(),t(e)}}}(e);if(s(r))return _(Duplexify,r,{objectMode:!0,write:n,final:a,destroy:o});let l=null==r?void 0:r.then;if("function"==typeof l){let e;let t=T(l,r,e=>{if(null!=e)throw new b("nully","body",e)},t=>{m(e,t)});return e=new Duplexify({objectMode:!0,readable:!1,write:n,final(e){a(async()=>{try{await t,i.nextTick(e,null)}catch(t){i.nextTick(e,t)}})},destroy:o})}throw new b("Iterable, AsyncIterable or AsyncFunction",t,r)}if(v(e))return duplexify(e.arrayBuffer());if(s(e))return _(Duplexify,e,{objectMode:!0,writable:!1});if("object"==typeof(null==e?void 0:e.writable)||"object"==typeof(null==e?void 0:e.readable)){let t=null!=e&&e.readable?d(null==e?void 0:e.readable)?null==e?void 0:e.readable:duplexify(e.readable):void 0,r=null!=e&&e.writable?u(null==e?void 0:e.writable)?null==e?void 0:e.writable:duplexify(e.writable):void 0;return _duplexify({readable:t,writable:r})}let r=null==e?void 0:e.then;if("function"==typeof r){let t;return T(r,e,e=>{null!=e&&t.push(e),t.push(null)},e=>{m(t,e)}),t=new Duplexify({objectMode:!0,writable:!1,read(){}})}throw new p(t,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)}},94906:function(e,t,r){"use strict";let i=r(34155),{AbortError:n,codes:a}=r(64385),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_PREMATURE_CLOSE:s}=a,{kEmptyObject:l,once:d}=r(70780),{validateAbortSignal:u,validateFunction:c,validateObject:h,validateBoolean:f}=r(8055),{Promise:p,PromisePrototypeThen:b}=r(57156),{isClosed:m,isReadable:y,isReadableNodeStream:g,isReadableStream:w,isReadableFinished:_,isReadableErrored:S,isWritable:v,isWritableNodeStream:A,isWritableStream:T,isWritableFinished:R,isWritableErrored:C,isNodeStream:I,willEmitClose:D,kIsClosedPromise:M}=r(66909),nop=()=>{};function eos(e,t,r){var a,f;if(2==arguments.length?(r=t,t=l):null==t?t=l:h(t,"options"),c(r,"callback"),u(t.signal,"options.signal"),r=d(r),w(e)||T(e))return function(e,t,r){let a=!1,o=nop;if(t.signal){if(o=()=>{a=!0,r.call(e,new n(void 0,{cause:t.signal.reason}))},t.signal.aborted)i.nextTick(o);else{let i=r;r=d((...r)=>{t.signal.removeEventListener("abort",o),i.apply(e,r)}),t.signal.addEventListener("abort",o)}}let resolverFn=(...t)=>{a||i.nextTick(()=>r.apply(e,t))};return b(e[M].promise,resolverFn,resolverFn),nop}(e,t,r);if(!I(e))throw new o("stream",["ReadableStream","WritableStream","Stream"],e);let p=null!==(a=t.readable)&&void 0!==a?a:g(e),N=null!==(f=t.writable)&&void 0!==f?f:A(e),P=e._writableState,k=e._readableState,onlegacyfinish=()=>{e.writable||onfinish()},O=D(e)&&g(e)===p&&A(e)===N,x=R(e,!1),onfinish=()=>{x=!0,e.destroyed&&(O=!1),O&&(!e.readable||p)||p&&!L||r.call(e)},L=_(e,!1),onend=()=>{L=!0,e.destroyed&&(O=!1),O&&(!e.writable||N)||N&&!x||r.call(e)},onerror=t=>{r.call(e,t)},W=m(e),onclose=()=>{W=!0;let t=C(e)||S(e);return t&&"boolean"!=typeof t?r.call(e,t):p&&!L&&g(e,!0)&&!_(e,!1)||N&&!x&&!R(e,!1)?r.call(e,new s):void r.call(e)},onclosed=()=>{W=!0;let t=C(e)||S(e);if(t&&"boolean"!=typeof t)return r.call(e,t);r.call(e)},onrequest=()=>{e.req.on("finish",onfinish)};e.setHeader&&"function"==typeof e.abort?(e.on("complete",onfinish),O||e.on("abort",onclose),e.req?onrequest():e.on("request",onrequest)):N&&!P&&(e.on("end",onlegacyfinish),e.on("close",onlegacyfinish)),O||"boolean"!=typeof e.aborted||e.on("aborted",onclose),e.on("end",onend),e.on("finish",onfinish),!1!==t.error&&e.on("error",onerror),e.on("close",onclose),W?i.nextTick(onclose):null!=P&&P.errorEmitted||null!=k&&k.errorEmitted?O||i.nextTick(onclosed):!p&&(!O||y(e))&&(x||!1===v(e))?i.nextTick(onclosed):!N&&(!O||v(e))&&(L||!1===y(e))?i.nextTick(onclosed):k&&e.req&&e.aborted&&i.nextTick(onclosed);let cleanup=()=>{r=nop,e.removeListener("aborted",onclose),e.removeListener("complete",onfinish),e.removeListener("abort",onclose),e.removeListener("request",onrequest),e.req&&e.req.removeListener("finish",onfinish),e.removeListener("end",onlegacyfinish),e.removeListener("close",onlegacyfinish),e.removeListener("finish",onfinish),e.removeListener("end",onend),e.removeListener("error",onerror),e.removeListener("close",onclose)};if(t.signal&&!W){let abort=()=>{let i=r;cleanup(),i.call(e,new n(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)i.nextTick(abort);else{let i=r;r=d((...r)=>{t.signal.removeEventListener("abort",abort),i.apply(e,r)}),t.signal.addEventListener("abort",abort)}}return cleanup}e.exports=eos,e.exports.finished=function(e,t){var r;let i=!1;return null===t&&(t=l),null!==(r=t)&&void 0!==r&&r.cleanup&&(f(t.cleanup,"cleanup"),i=t.cleanup),new p((r,n)=>{let a=eos(e,t,e=>{i&&a(),e?n(e):r()})})}},24545:function(e,t,r){"use strict";let i=r(34155),{PromisePrototypeThen:n,SymbolAsyncIterator:a,SymbolIterator:o}=r(57156),{Buffer:s}=r(48764),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_NULL_VALUES:d}=r(64385).codes;e.exports=function(e,t,r){let u,c;if("string"==typeof t||t instanceof s)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});if(t&&t[a])c=!0,u=t[a]();else if(t&&t[o])c=!1,u=t[o]();else throw new l("iterable",["Iterable"],t);let h=new e({objectMode:!0,highWaterMark:1,...r}),f=!1;async function close(e){let t=null!=e,r="function"==typeof u.throw;if(t&&r){let{value:t,done:r}=await u.throw(e);if(await t,r)return}if("function"==typeof u.return){let{value:e}=await u.return();await e}}async function next(){for(;;){try{let{value:e,done:t}=c?await u.next():u.next();if(t)h.push(null);else{let t=e&&"function"==typeof e.then?await e:e;if(null===t)throw f=!1,new d;if(h.push(t))continue;f=!1}}catch(e){h.destroy(e)}break}}return h._read=function(){f||(f=!0,next())},h._destroy=function(e,t){n(close(e),()=>i.nextTick(t,e),r=>i.nextTick(t,r||e))},h}},85484:function(e,t,r){"use strict";let{ArrayIsArray:i,ObjectSetPrototypeOf:n}=r(57156),{EventEmitter:a}=r(17187);function Stream(e){a.call(this,e)}function prependListener(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?i(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}n(Stream.prototype,a.prototype),n(Stream,a),Stream.prototype.pipe=function(e,t){let r=this;function ondata(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function ondrain(){r.readable&&r.resume&&r.resume()}r.on("data",ondata),e.on("drain",ondrain),e._isStdio||t&&!1===t.end||(r.on("end",onend),r.on("close",onclose));let i=!1;function onend(){i||(i=!0,e.end())}function onclose(){i||(i=!0,"function"==typeof e.destroy&&e.destroy())}function onerror(e){cleanup(),0===a.listenerCount(this,"error")&&this.emit("error",e)}function cleanup(){r.removeListener("data",ondata),e.removeListener("drain",ondrain),r.removeListener("end",onend),r.removeListener("close",onclose),r.removeListener("error",onerror),e.removeListener("error",onerror),r.removeListener("end",cleanup),r.removeListener("close",cleanup),e.removeListener("close",cleanup)}return prependListener(r,"error",onerror),prependListener(e,"error",onerror),r.on("end",cleanup),r.on("close",cleanup),e.on("close",cleanup),e.emit("pipe",r),e},e.exports={Stream,prependListener}},27715:function(e,t,r){"use strict";let i=globalThis.AbortController||r(28599).AbortController,{codes:{ERR_INVALID_ARG_VALUE:n,ERR_INVALID_ARG_TYPE:a,ERR_MISSING_ARGS:o,ERR_OUT_OF_RANGE:s},AbortError:l}=r(64385),{validateAbortSignal:d,validateInteger:u,validateObject:c}=r(8055),h=r(57156).Symbol("kWeak"),{finished:f}=r(94906),p=r(96171),{addAbortSignalNoValidate:b}=r(32264),{isWritable:m,isNodeStream:y}=r(66909),{ArrayPrototypePush:g,MathFloor:w,Number:_,NumberIsNaN:S,Promise:v,PromiseReject:A,PromisePrototypeThen:T,Symbol:R}=r(57156),C=R("kEmpty"),I=R("kEof");function map(e,t){if("function"!=typeof e)throw new a("fn",["Function","AsyncFunction"],e);null!=t&&c(t,"options"),(null==t?void 0:t.signal)!=null&&d(t.signal,"options.signal");let r=1;return(null==t?void 0:t.concurrency)!=null&&(r=w(t.concurrency)),u(r,"concurrency",1),(async function*(){var n,a;let o,s;let d=new i,u=this,c=[],h=d.signal,f={signal:h},abort=()=>d.abort();null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted&&abort(),null==t||null===(a=t.signal)||void 0===a||a.addEventListener("abort",abort);let p=!1;function onDone(){p=!0}(async function(){var i,n;try{for await(let t of u){if(p)return;if(h.aborted)throw new l;try{t=e(t,f)}catch(e){t=A(e)}t!==C&&("function"==typeof(null===(i=t)||void 0===i?void 0:i.catch)&&t.catch(onDone),c.push(t),o&&(o(),o=null),!p&&c.length&&c.length>=r&&await new v(e=>{s=e}))}c.push(I)}catch(t){let e=A(t);T(e,void 0,onDone),c.push(e)}finally{p=!0,o&&(o(),o=null),null==t||null===(n=t.signal)||void 0===n||n.removeEventListener("abort",abort)}})();try{for(;;){for(;c.length>0;){let e=await c[0];if(e===I)return;if(h.aborted)throw new l;e!==C&&(yield e),c.shift(),s&&(s(),s=null)}await new v(e=>{o=e})}}finally{d.abort(),p=!0,s&&(s(),s=null)}}).call(this)}async function some(e,t){for await(let r of filter.call(this,e,t))return!0;return!1}async function every(e,t){if("function"!=typeof e)throw new a("fn",["Function","AsyncFunction"],e);return!await some.call(this,async(...t)=>!await e(...t),t)}async function find(e,t){for await(let r of filter.call(this,e,t))return r}async function forEach(e,t){if("function"!=typeof e)throw new a("fn",["Function","AsyncFunction"],e);async function forEachFn(t,r){return await e(t,r),C}for await(let e of map.call(this,forEachFn,t));}function filter(e,t){if("function"!=typeof e)throw new a("fn",["Function","AsyncFunction"],e);async function filterFn(t,r){return await e(t,r)?t:C}return map.call(this,filterFn,t)}let ReduceAwareErrMissingArgs=class ReduceAwareErrMissingArgs extends o{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function reduce(e,t,r){var n,o;if("function"!=typeof e)throw new a("reducer",["Function","AsyncFunction"],e);null!=r&&c(r,"options"),(null==r?void 0:r.signal)!=null&&d(r.signal,"options.signal");let s=arguments.length>1;if(null!=r&&null!==(n=r.signal)&&void 0!==n&&n.aborted){let e=new l(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await f(this.destroy(e)),e}let u=new i,p=u.signal;null!=r&&r.signal&&r.signal.addEventListener("abort",()=>u.abort(),{once:!0,[h]:this});let b=!1;try{for await(let i of this){if(b=!0,null!=r&&null!==(o=r.signal)&&void 0!==o&&o.aborted)throw new l;s?t=await e(t,i,{signal:p}):(t=i,s=!0)}if(!b&&!s)throw new ReduceAwareErrMissingArgs}finally{u.abort()}return t}async function toArray(e){null!=e&&c(e,"options"),(null==e?void 0:e.signal)!=null&&d(e.signal,"options.signal");let t=[];for await(let i of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new l(void 0,{cause:e.signal.reason});g(t,i)}return t}function toIntegerOrInfinity(e){if(S(e=_(e)))return 0;if(e<0)throw new s("number",">= 0",e);return e}e.exports.streamReturningOperators={asIndexedPairs:function(e){return null!=e&&c(e,"options"),(null==e?void 0:e.signal)!=null&&d(e.signal,"options.signal"),(async function*(){let t=0;for await(let i of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new l({cause:e.signal.reason});yield[t++,i]}}).call(this)},drop:function(e,t){return null!=t&&c(t,"options"),(null==t?void 0:t.signal)!=null&&d(t.signal,"options.signal"),e=toIntegerOrInfinity(e),(async function*(){var r,i;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;for await(let r of this){if(null!=t&&null!==(i=t.signal)&&void 0!==i&&i.aborted)throw new l;e--<=0&&(yield r)}}).call(this)},filter,flatMap:function(e,t){let r=map.call(this,e,t);return(async function*(){for await(let e of r)yield*e}).call(this)},map,take:function(e,t){return null!=t&&c(t,"options"),(null==t?void 0:t.signal)!=null&&d(t.signal,"options.signal"),e=toIntegerOrInfinity(e),(async function*(){var r,i;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;for await(let r of this){if(null!=t&&null!==(i=t.signal)&&void 0!==i&&i.aborted)throw new l;if(!(e-- >0))return;yield r}}).call(this)},compose:function(e,t){if(null!=t&&c(t,"options"),(null==t?void 0:t.signal)!=null&&d(t.signal,"options.signal"),y(e)&&!m(e))throw new n("stream",e,"must be writable");let r=p(this,e);return null!=t&&t.signal&&b(t.signal,r),r}},e.exports.promiseReturningOperators={every,forEach,reduce,toArray,some,find}},23058:function(e,t,r){"use strict";let{ObjectSetPrototypeOf:i}=r(57156);e.exports=PassThrough;let n=r(88393);function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);n.call(this,e)}i(PassThrough.prototype,n.prototype),i(PassThrough,n),PassThrough.prototype._transform=function(e,t,r){r(null,e)}},6729:function(e,t,r){let i,n;"use strict";let a=r(34155),{ArrayIsArray:o,Promise:s,SymbolAsyncIterator:l}=r(57156),d=r(94906),{once:u}=r(70780),c=r(39201),h=r(96665),{aggregateTwoErrors:f,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:b,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:y,ERR_STREAM_PREMATURE_CLOSE:g},AbortError:w}=r(64385),{validateFunction:_,validateAbortSignal:S}=r(8055),{isIterable:v,isReadable:A,isReadableNodeStream:T,isNodeStream:R,isTransformStream:C,isWebStream:I,isReadableStream:D,isReadableEnded:M}=r(66909),N=globalThis.AbortController||r(28599).AbortController;function destroyer(e,t,r){let i=!1;e.on("close",()=>{i=!0});let n=d(e,{readable:t,writable:r},e=>{i=!e});return{destroy:t=>{i||(i=!0,c.destroyer(e,t||new y("pipe")))},cleanup:n}}function makeAsyncIterable(e){if(v(e))return e;if(T(e))return fromReadable(e);throw new p("val",["Readable","Iterable","AsyncIterable"],e)}async function*fromReadable(e){n||(n=r(47950)),yield*n.prototype[l].call(e)}async function pumpToNode(e,t,r,{end:i}){let n;let a=null,resume=e=>{if(e&&(n=e),a){let e=a;a=null,e()}},wait=()=>new s((e,t)=>{n?t(n):a=()=>{n?t(n):e()}});t.on("drain",resume);let o=d(t,{readable:!1},resume);try{for await(let r of(t.writableNeedDrain&&await wait(),e))t.write(r)||await wait();i&&t.end(),await wait(),r()}catch(e){r(n!==e?f(n,e):e)}finally{o(),t.off("drain",resume)}}async function pumpToWeb(e,t,r,{end:i}){C(t)&&(t=t.writable);let n=t.getWriter();try{for await(let t of e)await n.ready,n.write(t).catch(()=>{});await n.ready,i&&await n.close(),r()}catch(e){try{await n.abort(e),r(e)}catch(e){r(e)}}}function pipelineImpl(e,t,n){let s,l,u;if(1===e.length&&o(e[0])&&(e=e[0]),e.length<2)throw new m("streams");let c=new N,f=c.signal,y=null==n?void 0:n.signal,_=[];function abort(){finishImpl(new w)}S(y,"options.signal"),null==y||y.addEventListener("abort",abort);let P=[],k=0;function finish(e){finishImpl(e,0==--k)}function finishImpl(e,r){if(e&&(!s||"ERR_STREAM_PREMATURE_CLOSE"===s.code)&&(s=e),s||r){for(;P.length;)P.shift()(s);null==y||y.removeEventListener("abort",abort),c.abort(),r&&(s||_.forEach(e=>e()),a.nextTick(t,s,l))}}for(let t=0;t<e.length;t++){let o=e[t],s=t<e.length-1,c=t>0,m=s||(null==n?void 0:n.end)!==!1,y=t===e.length-1;if(R(o)){if(m){let{destroy:e,cleanup:t}=destroyer(o,s,c);P.push(e),A(o)&&y&&_.push(t)}function onError(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&finish(e)}o.on("error",onError),A(o)&&y&&_.push(()=>{o.removeListener("error",onError)})}if(0===t){if("function"==typeof o){if(!v(u=o({signal:f})))throw new b("Iterable, AsyncIterable or Stream","source",u)}else u=v(o)||T(o)||C(o)?o:h.from(o)}else if("function"==typeof o){var O,x;if(u=o(u=C(u)?makeAsyncIterable(null===(O=u)||void 0===O?void 0:O.readable):makeAsyncIterable(u),{signal:f}),s){if(!v(u,!0))throw new b("AsyncIterable",`transform[${t-1}]`,u)}else{i||(i=r(23058));let e=new i({objectMode:!0}),t=null===(x=u)||void 0===x?void 0:x.then;if("function"==typeof t)k++,t.call(u,t=>{l=t,null!=t&&e.write(t),m&&e.end(),a.nextTick(finish)},t=>{e.destroy(t),a.nextTick(finish,t)});else if(v(u,!0))k++,pumpToNode(u,e,finish,{end:m});else if(D(u)||C(u)){let t=u.readable||u;k++,pumpToNode(t,e,finish,{end:m})}else throw new b("AsyncIterable or Promise","destination",u);u=e;let{destroy:n,cleanup:o}=destroyer(u,!1,!0);P.push(n),y&&_.push(o)}}else if(R(o)){if(T(u)){k+=2;let e=function(e,t,r,{end:i}){let n=!1;if(t.on("close",()=>{n||r(new g)}),e.pipe(t,{end:!1}),i){function endFn(){n=!0,t.end()}M(e)?a.nextTick(endFn):e.once("end",endFn)}else r();return d(e,{readable:!0,writable:!1},t=>{let i=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&i&&i.ended&&!i.errored&&!i.errorEmitted?e.once("end",r).once("error",r):r(t)}),d(t,{readable:!1,writable:!0},r)}(u,o,finish,{end:m});A(o)&&y&&_.push(e)}else if(C(u)||D(u)){let e=u.readable||u;k++,pumpToNode(e,o,finish,{end:m})}else if(v(u))k++,pumpToNode(u,o,finish,{end:m});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],u);u=o}else if(I(o)){if(T(u))k++,pumpToWeb(makeAsyncIterable(u),o,finish,{end:m});else if(D(u)||v(u))k++,pumpToWeb(u,o,finish,{end:m});else if(C(u))k++,pumpToWeb(u.readable,o,finish,{end:m});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],u);u=o}else u=h.from(o)}return(null!=f&&f.aborted||null!=y&&y.aborted)&&a.nextTick(abort),u}e.exports={pipelineImpl,pipeline:function(...e){return pipelineImpl(e,u((_(e[e.length-1],"streams[stream.length - 1]"),e.pop())))}}},47950:function(e,t,r){let i;"use strict";let n=r(34155),{ArrayPrototypeIndexOf:a,NumberIsInteger:o,NumberIsNaN:s,NumberParseInt:l,ObjectDefineProperties:d,ObjectKeys:u,ObjectSetPrototypeOf:c,Promise:h,SafeSet:f,SymbolAsyncIterator:p,Symbol:b}=r(57156);e.exports=Readable,Readable.ReadableState=ReadableState;let{EventEmitter:m}=r(17187),{Stream:y,prependListener:g}=r(85484),{Buffer:w}=r(48764),{addAbortSignal:_}=r(32264),S=r(94906),v=r(70780).debuglog("stream",e=>{v=e}),A=r(57231),T=r(39201),{getHighWaterMark:R,getDefaultHighWaterMark:C}=r(25917),{aggregateTwoErrors:I,codes:{ERR_INVALID_ARG_TYPE:D,ERR_METHOD_NOT_IMPLEMENTED:M,ERR_OUT_OF_RANGE:N,ERR_STREAM_PUSH_AFTER_EOF:P,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:k}}=r(64385),{validateObject:O}=r(8055),x=b("kPaused"),{StringDecoder:L}=r(32553),W=r(24545);c(Readable.prototype,y.prototype),c(Readable,y);let nop=()=>{},{errorOrDestroy:U}=T;function ReadableState(e,t,i){"boolean"!=typeof i&&(i=t instanceof r(96665)),this.objectMode=!!(e&&e.objectMode),i&&(this.objectMode=this.objectMode||!!(e&&e.readableObjectMode)),this.highWaterMark=e?R(this,e,"readableHighWaterMark",i):C(!1),this.buffer=new A,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[x]=null,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new L(e.encoding),this.encoding=e.encoding)}function Readable(e){if(!(this instanceof Readable))return new Readable(e);let t=this instanceof r(96665);this._readableState=new ReadableState(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&_(e.signal,this)),y.call(this,e),T.construct(this,()=>{this._readableState.needReadable&&maybeReadMore(this,this._readableState)})}function readableAddChunk(e,t,r,i){let n;v("readableAddChunk",t);let a=e._readableState;if(a.objectMode||("string"==typeof t?(r=r||a.defaultEncoding,a.encoding!==r&&(i&&a.encoding?t=w.from(t,r).toString(a.encoding):(t=w.from(t,r),r=""))):t instanceof w?r="":y._isUint8Array(t)?(t=y._uint8ArrayToBuffer(t),r=""):null!=t&&(n=new D("chunk",["string","Buffer","Uint8Array"],t))),n)U(e,n);else if(null===t)a.reading=!1,function(e,t){if(v("onEofChunk"),!t.ended){if(t.decoder){let e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?emitReadable(e):(t.needReadable=!1,t.emittedReadable=!0,emitReadable_(e))}}(e,a);else if(a.objectMode||t&&t.length>0){if(i){if(a.endEmitted)U(e,new k);else{if(a.destroyed||a.errored)return!1;addChunk(e,a,t,!0)}}else if(a.ended)U(e,new P);else{if(a.destroyed||a.errored)return!1;a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?addChunk(e,a,t,!1):maybeReadMore(e,a)):addChunk(e,a,t,!1)}}else i||(a.reading=!1,maybeReadMore(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function addChunk(e,t,r,i){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&emitReadable(e)),maybeReadMore(e,t)}function howMuchToRead(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:s(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function emitReadable(e){let t=e._readableState;v("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(v("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(emitReadable_,e))}function emitReadable_(e){let t=e._readableState;v("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&!t.errored&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,flow(e)}function maybeReadMore(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,n.nextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){let r=t.length;if(v("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function updateReadableListening(e){let t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[x]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function nReadingNextTick(e){v("readable nexttick read 0"),e.read(0)}function resume_(e,t){v("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}function flow(e){let t=e._readableState;for(v("flow",t.flowing);t.flowing&&null!==e.read(););}function streamToAsyncIterator(e,t){"function"!=typeof e.read&&(e=Readable.wrap(e,{objectMode:!0}));let r=createAsyncIterator(e,t);return r.stream=e,r}async function*createAsyncIterator(e,t){let r,i=nop;function next(t){this===e?(i(),i=nop):i=t}e.on("readable",next);let n=S(e,{writable:!1},e=>{r=e?I(r,e):null,i(),i=nop});try{for(;;){let t=e.destroyed?null:e.read();if(null!==t)yield t;else if(r)throw r;else{if(null===r)return;await new h(next)}}}catch(e){throw r=I(r,e)}finally{(r||(null==t?void 0:t.destroyOnReturn)!==!1)&&(void 0===r||e._readableState.autoDestroy)?T.destroyer(e,null):(e.off("readable",next),n())}}function fromList(e,t){let r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function endReadable(e){let t=e._readableState;v("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(endReadableNT,t,e))}function endReadableNT(e,t){if(v("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length){if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)n.nextTick(endWritableNT,t);else if(e.autoDestroy){let e=t._writableState,r=!e||e.autoDestroy&&(e.finished||!1===e.writable);r&&t.destroy()}}}function endWritableNT(e){let t=e.writable&&!e.writableEnded&&!e.destroyed;t&&e.end()}function lazyWebStreams(){return void 0===i&&(i={}),i}Readable.prototype.destroy=T.destroy,Readable.prototype._undestroy=T.undestroy,Readable.prototype._destroy=function(e,t){t(e)},Readable.prototype[m.captureRejectionSymbol]=function(e){this.destroy(e)},Readable.prototype.push=function(e,t){return readableAddChunk(this,e,t,!1)},Readable.prototype.unshift=function(e,t){return readableAddChunk(this,e,t,!0)},Readable.prototype.isPaused=function(){let e=this._readableState;return!0===e[x]||!1===e.flowing},Readable.prototype.setEncoding=function(e){let t=new L(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,i="";for(let e of r)i+=t.write(e);return r.clear(),""!==i&&r.push(i),this._readableState.length=i.length,this},Readable.prototype.read=function(e){let t;v("read",e),void 0===e?e=NaN:o(e)||(e=l(e,10));let r=this._readableState,i=e;if(e>r.highWaterMark&&(r.highWaterMark=function(e){if(e>1073741824)throw new N("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return v("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?endReadable(this):emitReadable(this),null;if(0===(e=howMuchToRead(e,r))&&r.ended)return 0===r.length&&endReadable(this),null;let n=r.needReadable;if(v("need readable",n),(0===r.length||r.length-e<r.highWaterMark)&&v("length less than watermark",n=!0),r.ended||r.reading||r.destroyed||r.errored||!r.constructed)v("reading, ended or constructing",n=!1);else if(n){v("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0);try{this._read(r.highWaterMark)}catch(e){U(this,e)}r.sync=!1,r.reading||(e=howMuchToRead(i,r))}return null===(t=e>0?fromList(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.multiAwaitDrain?r.awaitDrainWriters.clear():r.awaitDrainWriters=null),0===r.length&&(r.ended||(r.needReadable=!0),i!==e&&r.ended&&endReadable(this)),null===t||r.errorEmitted||r.closeEmitted||(r.dataEmitted=!0,this.emit("data",t)),t},Readable.prototype._read=function(e){throw new M("_read()")},Readable.prototype.pipe=function(e,t){let r;let i=this,a=this._readableState;1!==a.pipes.length||a.multiAwaitDrain||(a.multiAwaitDrain=!0,a.awaitDrainWriters=new f(a.awaitDrainWriters?[a.awaitDrainWriters]:[])),a.pipes.push(e),v("pipe count=%d opts=%j",a.pipes.length,t);let o=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr,s=o?onend:unpipe;function onend(){v("onend"),e.end()}a.endEmitted?n.nextTick(s):i.once("end",s),e.on("unpipe",function onunpipe(t,n){v("onunpipe"),t===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,v("cleanup"),e.removeListener("close",onclose),e.removeListener("finish",onfinish),r&&e.removeListener("drain",r),e.removeListener("error",onerror),e.removeListener("unpipe",onunpipe),i.removeListener("end",onend),i.removeListener("end",unpipe),i.removeListener("data",ondata),l=!0,r&&a.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&r())});let l=!1;function pause(){l||(1===a.pipes.length&&a.pipes[0]===e?(v("false write response, pause",0),a.awaitDrainWriters=e,a.multiAwaitDrain=!1):a.pipes.length>1&&a.pipes.includes(e)&&(v("false write response, pause",a.awaitDrainWriters.size),a.awaitDrainWriters.add(e)),i.pause()),r||(r=function(){let t=i._readableState;t.awaitDrainWriters===e?(v("pipeOnDrain",1),t.awaitDrainWriters=null):t.multiAwaitDrain&&(v("pipeOnDrain",t.awaitDrainWriters.size),t.awaitDrainWriters.delete(e)),(!t.awaitDrainWriters||0===t.awaitDrainWriters.size)&&i.listenerCount("data")&&i.resume()},e.on("drain",r))}function ondata(t){v("ondata");let r=e.write(t);v("dest.write",r),!1===r&&pause()}function onerror(t){if(v("onerror",t),unpipe(),e.removeListener("error",onerror),0===e.listenerCount("error")){let r=e._writableState||e._readableState;r&&!r.errorEmitted?U(e,t):e.emit("error",t)}}function onclose(){e.removeListener("finish",onfinish),unpipe()}function onfinish(){v("onfinish"),e.removeListener("close",onclose),unpipe()}function unpipe(){v("unpipe"),i.unpipe(e)}return i.on("data",ondata),g(e,"error",onerror),e.once("close",onclose),e.once("finish",onfinish),e.emit("pipe",i),!0===e.writableNeedDrain?a.flowing&&pause():a.flowing||(v("pipe resume"),i.resume()),e},Readable.prototype.unpipe=function(e){let t=this._readableState;if(0===t.pipes.length)return this;if(!e){let e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}let r=a(t.pipes,e);return -1===r||(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},Readable.prototype.on=function(e,t){let r=y.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"!==e||i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,v("on readable",i.length,i.reading),i.length?emitReadable(this):i.reading||n.nextTick(nReadingNextTick,this)),r},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.removeListener=function(e,t){let r=y.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(updateReadableListening,this),r},Readable.prototype.off=Readable.prototype.removeListener,Readable.prototype.removeAllListeners=function(e){let t=y.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&n.nextTick(updateReadableListening,this),t},Readable.prototype.resume=function(){let e=this._readableState;return e.flowing||(v("resume"),e.flowing=!e.readableListening,e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(resume_,this,e))),e[x]=!1,this},Readable.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[x]=!0,this},Readable.prototype.wrap=function(e){let t=!1;e.on("data",r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{U(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};let r=u(e);for(let t=1;t<r.length;t++){let i=r[t];void 0===this[i]&&"function"==typeof e[i]&&(this[i]=e[i].bind(e))}return this},Readable.prototype[p]=function(){return streamToAsyncIterator(this)},Readable.prototype.iterator=function(e){return void 0!==e&&O(e,"options"),streamToAsyncIterator(this,e)},d(Readable.prototype,{readable:{__proto__:null,get(){let e=this._readableState;return!!e&&!1!==e.readable&&!e.destroyed&&!e.errorEmitted&&!e.endEmitted},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._readableState.readable&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),d(ReadableState.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[x]},set(e){this[x]=!!e}}}),Readable._fromList=fromList,Readable.from=function(e,t){return W(Readable,e,t)},Readable.fromWeb=function(e,t){return lazyWebStreams().newStreamReadableFromReadableStream(e,t)},Readable.toWeb=function(e,t){return lazyWebStreams().newReadableStreamFromStreamReadable(e,t)},Readable.wrap=function(e,t){var r,i;return new Readable({objectMode:null===(r=null!==(i=e.readableObjectMode)&&void 0!==i?i:e.objectMode)||void 0===r||r,...t,destroy(t,r){T.destroyer(e,t),r(t)}}).wrap(e)}},25917:function(e,t,r){"use strict";let{MathFloor:i,NumberIsInteger:n}=r(57156),{ERR_INVALID_ARG_VALUE:a}=r(64385).codes;function getDefaultHighWaterMark(e){return e?16:16384}e.exports={getHighWaterMark:function(e,t,r,o){let s=null!=t.highWaterMark?t.highWaterMark:o?t[r]:null;if(null!=s){if(!n(s)||s<0){let e=o?`options.${r}`:"options.highWaterMark";throw new a(e,s)}return i(s)}return getDefaultHighWaterMark(e.objectMode)},getDefaultHighWaterMark}},88393:function(e,t,r){"use strict";let{ObjectSetPrototypeOf:i,Symbol:n}=r(57156);e.exports=Transform;let{ERR_METHOD_NOT_IMPLEMENTED:a}=r(64385).codes,o=r(96665),{getHighWaterMark:s}=r(25917);i(Transform.prototype,o.prototype),i(Transform,o);let l=n("kCallback");function Transform(e){if(!(this instanceof Transform))return new Transform(e);let t=e?s(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),o.call(this,e),this._readableState.sync=!1,this[l]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",prefinish)}function final(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,r)=>{if(t){e?e(t):this.destroy(t);return}null!=r&&this.push(r),this.push(null),e&&e()})}function prefinish(){this._final!==final&&final.call(this)}Transform.prototype._final=final,Transform.prototype._transform=function(e,t,r){throw new a("_transform()")},Transform.prototype._write=function(e,t,r){let i=this._readableState,n=this._writableState,a=i.length;this._transform(e,t,(e,t)=>{if(e){r(e);return}null!=t&&this.push(t),n.ended||a===i.length||i.length<i.highWaterMark?r():this[l]=r})},Transform.prototype._read=function(){if(this[l]){let e=this[l];this[l]=null,e()}}},66909:function(e,t,r){"use strict";let{Symbol:i,SymbolAsyncIterator:n,SymbolIterator:a,SymbolFor:o}=r(57156),s=i("kDestroyed"),l=i("kIsErrored"),d=i("kIsReadable"),u=i("kIsDisturbed"),c=o("nodejs.webstream.isClosedPromise"),h=o("nodejs.webstream.controllerErrorFunction");function isReadableNodeStream(e,t=!1){var r;return!!(e&&"function"==typeof e.pipe&&"function"==typeof e.on&&(!t||"function"==typeof e.pause&&"function"==typeof e.resume)&&(!e._writableState||(null===(r=e._readableState)||void 0===r?void 0:r.readable)!==!1)&&(!e._writableState||e._readableState))}function isWritableNodeStream(e){var t;return!!(e&&"function"==typeof e.write&&"function"==typeof e.on&&(!e._readableState||(null===(t=e._writableState)||void 0===t?void 0:t.writable)!==!1))}function isNodeStream(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function isReadableStream(e){return!!(e&&!isNodeStream(e)&&"function"==typeof e.pipeThrough&&"function"==typeof e.getReader&&"function"==typeof e.cancel)}function isWritableStream(e){return!!(e&&!isNodeStream(e)&&"function"==typeof e.getWriter&&"function"==typeof e.abort)}function isTransformStream(e){return!!(e&&!isNodeStream(e)&&"object"==typeof e.readable&&"object"==typeof e.writable)}function isDestroyed(e){if(!isNodeStream(e))return null;let t=e._writableState,r=e._readableState,i=t||r;return!!(e.destroyed||e[s]||null!=i&&i.destroyed)}function isWritableEnded(e){if(!isWritableNodeStream(e))return null;if(!0===e.writableEnded)return!0;let t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function isReadableFinished(e,t){if(!isReadableNodeStream(e))return null;let r=e._readableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.endEmitted)?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function isReadable(e){return e&&null!=e[d]?e[d]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!isDestroyed(e)&&isReadableNodeStream(e)&&e.readable&&!isReadableFinished(e)}function isWritable(e){return"boolean"!=typeof(null==e?void 0:e.writable)?null:!isDestroyed(e)&&isWritableNodeStream(e)&&e.writable&&!isWritableEnded(e)}function isOutgoingMessage(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function isServerResponse(e){return"boolean"==typeof e._sent100&&isOutgoingMessage(e)}e.exports={kDestroyed:s,isDisturbed:function(e){var t;return!!(e&&(null!==(t=e[u])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:u,isErrored:function(e){var t,r,i,n,a,o,s,d,u,c;return!!(e&&(null!==(t=null!==(r=null!==(i=null!==(n=null!==(a=null!==(o=e[l])&&void 0!==o?o:e.readableErrored)&&void 0!==a?a:e.writableErrored)&&void 0!==n?n:null===(s=e._readableState)||void 0===s?void 0:s.errorEmitted)&&void 0!==i?i:null===(d=e._writableState)||void 0===d?void 0:d.errorEmitted)&&void 0!==r?r:null===(u=e._readableState)||void 0===u?void 0:u.errored)&&void 0!==t?t:null===(c=e._writableState)||void 0===c?void 0:c.errored))},kIsErrored:l,isReadable,kIsReadable:d,kIsClosedPromise:c,kControllerErrorFunction:h,isClosed:function(e){if(!isNodeStream(e))return null;if("boolean"==typeof e.closed)return e.closed;let t=e._writableState,r=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==r?void 0:r.closed)?(null==t?void 0:t.closed)||(null==r?void 0:r.closed):"boolean"==typeof e._closed&&isOutgoingMessage(e)?e._closed:null},isDestroyed,isDuplexNodeStream:function(e){return!!(e&&"function"==typeof e.pipe&&e._readableState&&"function"==typeof e.on&&"function"==typeof e.write)},isFinished:function(e,t){return isNodeStream(e)?!!isDestroyed(e)||!((null==t?void 0:t.readable)!==!1&&isReadable(e)||(null==t?void 0:t.writable)!==!1&&isWritable(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[n]:!1===t?"function"==typeof e[a]:"function"==typeof e[n]||"function"==typeof e[a])},isReadableNodeStream,isReadableStream,isReadableEnded:function(e){if(!isReadableNodeStream(e))return null;if(!0===e.readableEnded)return!0;let t=e._readableState;return!!t&&!t.errored&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished,isReadableErrored:function(e){var t,r;return isNodeStream(e)?e.readableErrored?e.readableErrored:null!==(t=null===(r=e._readableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isNodeStream,isWebStream:function(e){return isReadableStream(e)||isWritableStream(e)||isTransformStream(e)},isWritable,isWritableNodeStream,isWritableStream,isWritableEnded,isWritableFinished:function(e,t){if(!isWritableNodeStream(e))return null;if(!0===e.writableFinished)return!0;let r=e._writableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.finished)?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))},isWritableErrored:function(e){var t,r;return isNodeStream(e)?e.writableErrored?e.writableErrored:null!==(t=null===(r=e._writableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)===void 0},isServerResponse,willEmitClose:function(e){if(!isNodeStream(e))return null;let t=e._writableState,r=e._readableState,i=t||r;return!i&&isServerResponse(e)||!!(i&&i.autoDestroy&&i.emitClose&&!1===i.closed)},isTransformStream}},39713:function(e,t,r){let i;"use strict";let n=r(34155),{ArrayPrototypeSlice:a,Error:o,FunctionPrototypeSymbolHasInstance:s,ObjectDefineProperty:l,ObjectDefineProperties:d,ObjectSetPrototypeOf:u,StringPrototypeToLowerCase:c,Symbol:h,SymbolHasInstance:f}=r(57156);e.exports=Writable,Writable.WritableState=WritableState;let{EventEmitter:p}=r(17187),b=r(85484).Stream,{Buffer:m}=r(48764),y=r(39201),{addAbortSignal:g}=r(32264),{getHighWaterMark:w,getDefaultHighWaterMark:_}=r(25917),{ERR_INVALID_ARG_TYPE:S,ERR_METHOD_NOT_IMPLEMENTED:v,ERR_MULTIPLE_CALLBACK:A,ERR_STREAM_CANNOT_PIPE:T,ERR_STREAM_DESTROYED:R,ERR_STREAM_ALREADY_FINISHED:C,ERR_STREAM_NULL_VALUES:I,ERR_STREAM_WRITE_AFTER_END:D,ERR_UNKNOWN_ENCODING:M}=r(64385).codes,{errorOrDestroy:N}=y;function nop(){}u(Writable.prototype,b.prototype),u(Writable,b);let P=h("kOnFinished");function WritableState(e,t,i){"boolean"!=typeof i&&(i=t instanceof r(96665)),this.objectMode=!!(e&&e.objectMode),i&&(this.objectMode=this.objectMode||!!(e&&e.writableObjectMode)),this.highWaterMark=e?w(this,e,"writableHighWaterMark",i):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(e&&!1===e.decodeStrings);this.decodeStrings=!n,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=onwrite.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,resetBuffer(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[P]=[]}function resetBuffer(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function Writable(e){let t=this instanceof r(96665);if(!t&&!s(Writable,this))return new Writable(e);this._writableState=new WritableState(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&g(e.signal,this)),b.call(this,e),y.construct(this,()=>{let e=this._writableState;e.writing||clearBuffer(this,e),finishMaybe(this,e)})}function _write(e,t,r,i){let a;let o=e._writableState;if("function"==typeof r)i=r,r=o.defaultEncoding;else{if(r){if("buffer"!==r&&!m.isEncoding(r))throw new M(r)}else r=o.defaultEncoding;"function"!=typeof i&&(i=nop)}if(null===t)throw new I;if(!o.objectMode){if("string"==typeof t)!1!==o.decodeStrings&&(t=m.from(t,r),r="buffer");else if(t instanceof m)r="buffer";else if(b._isUint8Array(t))t=b._uint8ArrayToBuffer(t),r="buffer";else throw new S("chunk",["string","Buffer","Uint8Array"],t)}return(o.ending?a=new D:o.destroyed&&(a=new R("write")),a)?(n.nextTick(i,a),N(e,a,!0),a):(o.pendingcb++,function(e,t,r,i,n){let a=t.objectMode?1:r.length;t.length+=a;let o=t.length<t.highWaterMark;return o||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:i,callback:n}),t.allBuffers&&"buffer"!==i&&(t.allBuffers=!1),t.allNoop&&n!==nop&&(t.allNoop=!1)):(t.writelen=a,t.writecb=n,t.writing=!0,t.sync=!0,e._write(r,i,t.onwrite),t.sync=!1),o&&!t.errored&&!t.destroyed}(e,o,t,r,i))}function doWrite(e,t,r,i,n,a,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new R("write")):r?e._writev(n,t.onwrite):e._write(n,a,t.onwrite),t.sync=!1}function onwriteError(e,t,r,i){--t.pendingcb,i(r),errorBuffer(t),N(e,r)}function onwrite(e,t){let r=e._writableState,i=r.sync,a=r.writecb;if("function"!=typeof a){N(e,new A);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t?(t.stack,r.errored||(r.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?n.nextTick(onwriteError,e,r,t,a):onwriteError(e,r,t,a)):(r.buffered.length>r.bufferedIndex&&clearBuffer(e,r),i?null!==r.afterWriteTickInfo&&r.afterWriteTickInfo.cb===a?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:a,stream:e,state:r},n.nextTick(afterWriteTick,r.afterWriteTickInfo)):afterWrite(e,r,1,a))}function afterWriteTick({stream:e,state:t,count:r,cb:i}){return t.afterWriteTickInfo=null,afterWrite(e,t,r,i)}function afterWrite(e,t,r,i){let n=!t.ending&&!e.destroyed&&0===t.length&&t.needDrain;for(n&&(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,i();t.destroyed&&errorBuffer(t),finishMaybe(e,t)}function errorBuffer(e){var t,r;if(e.writing)return;for(let r=e.bufferedIndex;r<e.buffered.length;++r){let{chunk:i,callback:n}=e.buffered[r],a=e.objectMode?1:i.length;e.length-=a,n(null!==(t=e.errored)&&void 0!==t?t:new R("write"))}let i=e[P].splice(0);for(let t=0;t<i.length;t++)i[t](null!==(r=e.errored)&&void 0!==r?r:new R("end"));resetBuffer(e)}function clearBuffer(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;let{buffered:r,bufferedIndex:i,objectMode:n}=t,o=r.length-i;if(!o)return;let s=i;if(t.bufferProcessing=!0,o>1&&e._writev){t.pendingcb-=o-1;let i=t.allNoop?nop:e=>{for(let t=s;t<r.length;++t)r[t].callback(e)},n=t.allNoop&&0===s?r:a(r,s);n.allBuffers=t.allBuffers,doWrite(e,t,!0,t.length,n,"",i),resetBuffer(t)}else{do{let{chunk:i,encoding:a,callback:o}=r[s];r[s++]=null;let l=n?1:i.length;doWrite(e,t,!1,l,i,a,o)}while(s<r.length&&!t.writing);s===r.length?resetBuffer(t):s>256?(r.splice(0,s),t.bufferedIndex=0):t.bufferedIndex=s}t.bufferProcessing=!1}function needFinish(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function finishMaybe(e,t,r){needFinish(t)&&(t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let r=!1;function onFinish(i){if(r){N(e,null!=i?i:A());return}if(r=!0,t.pendingcb--,i){let r=t[P].splice(0);for(let e=0;e<r.length;e++)r[e](i);N(e,i,t.sync)}else needFinish(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,n.nextTick(finish,e,t))}t.sync=!0,t.pendingcb++;try{e._final(onFinish)}catch(e){onFinish(e)}t.sync=!1}(e,t))),0===t.pendingcb&&(r?(t.pendingcb++,n.nextTick((e,t)=>{needFinish(t)?finish(e,t):t.pendingcb--},e,t)):needFinish(t)&&(t.pendingcb++,finish(e,t))))}function finish(e,t){t.pendingcb--,t.finished=!0;let r=t[P].splice(0);for(let e=0;e<r.length;e++)r[e]();if(e.emit("finish"),t.autoDestroy){let t=e._readableState,r=!t||t.autoDestroy&&(t.endEmitted||!1===t.readable);r&&e.destroy()}}WritableState.prototype.getBuffer=function(){return a(this.buffered,this.bufferedIndex)},l(WritableState.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),l(Writable,f,{__proto__:null,value:function(e){return!!s(this,e)||this===Writable&&e&&e._writableState instanceof WritableState}}),Writable.prototype.pipe=function(){N(this,new T)},Writable.prototype.write=function(e,t,r){return!0===_write(this,e,t,r)},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){let e=this._writableState;e.corked&&(e.corked--,e.writing||clearBuffer(this,e))},Writable.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=c(e)),!m.isEncoding(e))throw new M(e);return this._writableState.defaultEncoding=e,this},Writable.prototype._write=function(e,t,r){if(this._writev)this._writev([{chunk:e,encoding:t}],r);else throw new v("_write()")},Writable.prototype._writev=null,Writable.prototype.end=function(e,t,r){let i;let a=this._writableState;if("function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e){let r=_write(this,e,t);r instanceof o&&(i=r)}return a.corked&&(a.corked=1,this.uncork()),i||(a.errored||a.ending?a.finished?i=new C("end"):a.destroyed&&(i=new R("end")):(a.ending=!0,finishMaybe(this,a,!0),a.ended=!0)),"function"==typeof r&&(i||a.finished?n.nextTick(r,i):a[P].push(r)),this},d(Writable.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){let e=this._writableState;return!!e&&!1!==e.writable&&!e.destroyed&&!e.errored&&!e.ending&&!e.ended},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){let e=this._writableState;return!!e&&!e.destroyed&&!e.ending&&e.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._writableState.writable&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});let k=y.destroy;function lazyWebStreams(){return void 0===i&&(i={}),i}Writable.prototype.destroy=function(e,t){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[P].length)&&n.nextTick(errorBuffer,r),k.call(this,e,t),this},Writable.prototype._undestroy=y.undestroy,Writable.prototype._destroy=function(e,t){t(e)},Writable.prototype[p.captureRejectionSymbol]=function(e){this.destroy(e)},Writable.fromWeb=function(e,t){return lazyWebStreams().newStreamWritableFromWritableStream(e,t)},Writable.toWeb=function(e){return lazyWebStreams().newWritableStreamFromStreamWritable(e)}},8055:function(e,t,r){"use strict";let{ArrayIsArray:i,ArrayPrototypeIncludes:n,ArrayPrototypeJoin:a,ArrayPrototypeMap:o,NumberIsInteger:s,NumberIsNaN:l,NumberMAX_SAFE_INTEGER:d,NumberMIN_SAFE_INTEGER:u,NumberParseInt:c,ObjectPrototypeHasOwnProperty:h,RegExpPrototypeExec:f,String:p,StringPrototypeToUpperCase:b,StringPrototypeTrim:m}=r(57156),{hideStackFrames:y,codes:{ERR_SOCKET_BAD_PORT:g,ERR_INVALID_ARG_TYPE:w,ERR_INVALID_ARG_VALUE:_,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:v}}=r(64385),{normalizeEncoding:A}=r(70780),{isAsyncFunction:T,isArrayBufferView:R}=r(70780).types,C={},I=/^[0-7]+$/,D=y((e,t,r=u,i=d)=>{if("number"!=typeof e)throw new w(t,"number",e);if(!s(e))throw new S(t,"an integer",e);if(e<r||e>i)throw new S(t,`>= ${r} && <= ${i}`,e)}),M=y((e,t,r=-2147483648,i=2147483647)=>{if("number"!=typeof e)throw new w(t,"number",e);if(!s(e))throw new S(t,"an integer",e);if(e<r||e>i)throw new S(t,`>= ${r} && <= ${i}`,e)}),N=y((e,t,r=!1)=>{if("number"!=typeof e)throw new w(t,"number",e);if(!s(e))throw new S(t,"an integer",e);let i=r?1:0;if(e<i||e>4294967295)throw new S(t,`>= ${i} && <= 4294967295`,e)});function validateString(e,t){if("string"!=typeof e)throw new w(t,"string",e)}let P=y((e,t,r)=>{if(!n(r,e)){let i=a(o(r,e=>"string"==typeof e?`'${e}'`:p(e)),", ");throw new _(t,e,"must be one of: "+i)}});function validateBoolean(e,t){if("boolean"!=typeof e)throw new w(t,"boolean",e)}function getOwnPropertyValueOrDefault(e,t,r){return null!=e&&h(e,t)?e[t]:r}let k=y((e,t,r=null)=>{let n=getOwnPropertyValueOrDefault(r,"allowArray",!1),a=getOwnPropertyValueOrDefault(r,"allowFunction",!1),o=getOwnPropertyValueOrDefault(r,"nullable",!1);if(!o&&null===e||!n&&i(e)||"object"!=typeof e&&(!a||"function"!=typeof e))throw new w(t,"Object",e)}),O=y((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new w(t,"a dictionary",e)}),x=y((e,t,r=0)=>{if(!i(e))throw new w(t,"Array",e);if(e.length<r){let i=`must be longer than ${r}`;throw new _(t,e,i)}}),L=y((e,t="buffer")=>{if(!R(e))throw new w(t,["Buffer","TypedArray","DataView"],e)}),W=y((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new w(t,"AbortSignal",e)}),U=y((e,t)=>{if("function"!=typeof e)throw new w(t,"Function",e)}),B=y((e,t)=>{if("function"!=typeof e||T(e))throw new w(t,"Function",e)}),j=y((e,t)=>{if(void 0!==e)throw new w(t,"undefined",e)}),H=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function validateLinkHeaderFormat(e,t){if(void 0===e||!f(H,e))throw new _(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,r){if(void 0===e&&(e=r),"string"==typeof e){if(null===f(I,e))throw new _(t,e,"must be a 32-bit unsigned integer or an octal string");e=c(e,8)}return N(e,t),e},validateArray:x,validateStringArray:function(e,t){x(e,t);for(let r=0;r<e.length;r++)validateString(e[r],`${t}[${r}]`)},validateBooleanArray:function(e,t){x(e,t);for(let r=0;r<e.length;r++)validateBoolean(e[r],`${t}[${r}]`)},validateBoolean,validateBuffer:L,validateDictionary:O,validateEncoding:function(e,t){let r=A(t),i=e.length;if("hex"===r&&i%2!=0)throw new _("encoding",t,`is invalid for data of length ${i}`)},validateFunction:U,validateInt32:M,validateInteger:D,validateNumber:function(e,t,r,i){if("number"!=typeof e)throw new w(t,"number",e);if(null!=r&&e<r||null!=i&&e>i||(null!=r||null!=i)&&l(e))throw new S(t,`${null!=r?`>= ${r}`:""}${null!=r&&null!=i?" && ":""}${null!=i?`<= ${i}`:""}`,e)},validateObject:k,validateOneOf:P,validatePlainFunction:B,validatePort:function(e,t="Port",r=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===m(e).length||+e!=+e>>>0||e>65535||0===e&&!r)throw new g(t,e,r);return 0|e},validateSignalName:function(e,t="signal"){if(validateString(e,t),void 0===C[e]){if(void 0!==C[b(e)])throw new v(e+" (signals must use all capital letters)");throw new v(e)}},validateString,validateUint32:N,validateUndefined:j,validateUnion:function(e,t,r){if(!n(r,e))throw new w(t,`('${a(r,"|")}')`,e)},validateAbortSignal:W,validateLinkHeaderValue:function(e){if("string"==typeof e)return validateLinkHeaderFormat(e,"hints"),e;if(i(e)){let t=e.length,r="";if(0===t)return r;for(let i=0;i<t;i++){let n=e[i];validateLinkHeaderFormat(n,"hints"),r+=n,i!==t-1&&(r+=", ")}return r}throw new _("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},81876:function(e,t,r){"use strict";let i=r(14730),n=r(17578),a=i.Readable.destroy;e.exports=i.Readable,e.exports._uint8ArrayToBuffer=i._uint8ArrayToBuffer,e.exports._isUint8Array=i._isUint8Array,e.exports.isDisturbed=i.isDisturbed,e.exports.isErrored=i.isErrored,e.exports.isReadable=i.isReadable,e.exports.Readable=i.Readable,e.exports.Writable=i.Writable,e.exports.Duplex=i.Duplex,e.exports.Transform=i.Transform,e.exports.PassThrough=i.PassThrough,e.exports.addAbortSignal=i.addAbortSignal,e.exports.finished=i.finished,e.exports.destroy=i.destroy,e.exports.destroy=a,e.exports.pipeline=i.pipeline,e.exports.compose=i.compose,Object.defineProperty(i,"promises",{configurable:!0,enumerable:!0,get:()=>n}),e.exports.Stream=i.Stream,e.exports.default=e.exports},64385:function(e,t,r){"use strict";let{format:i,inspect:n,AggregateError:a}=r(70780),o=globalThis.AggregateError||a,s=Symbol("kIsNodeError"),l=["string","function","number","object","Function","Object","boolean","bigint","symbol"],d=/^([A-Z][a-z0-9]*)+$/,u={};function assert(e,t){if(!e)throw new u.ERR_INTERNAL_ASSERTION(t)}function addNumericalSeparator(e){let t="",r=e.length,i="-"===e[0]?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function E(e,t,r){r||(r=Error);let NodeError=class NodeError extends r{constructor(...r){super(function(e,t,r){if("function"==typeof t)return assert(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);let n=(t.match(/%[dfijoOs]/g)||[]).length;return(assert(n===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),0===r.length)?t:i(t,...r)}(e,t,r))}toString(){return`${this.name} [${e}]: ${this.message}`}};Object.defineProperties(NodeError.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),NodeError.prototype.code=e,NodeError.prototype[s]=!0,u[e]=NodeError}function hideStackFrames(e){let t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}E("ERR_ASSERTION","%s",Error),E("ERR_INVALID_ARG_TYPE",(e,t,r)=>{assert("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let i="The ";e.endsWith(" argument")?i+=`${e} `:i+=`"${e}" ${e.includes(".")?"property":"argument"} `,i+="must be ";let a=[],o=[],s=[];for(let e of t)assert("string"==typeof e,"All expected entries have to be of type string"),l.includes(e)?a.push(e.toLowerCase()):d.test(e)?o.push(e):(assert("object"!==e,'The value "object" should be written as "Object"'),s.push(e));if(o.length>0){let e=a.indexOf("object");-1!==e&&(a.splice(a,e,1),o.push("Object"))}if(a.length>0){switch(a.length){case 1:i+=`of type ${a[0]}`;break;case 2:i+=`one of type ${a[0]} or ${a[1]}`;break;default:{let e=a.pop();i+=`one of type ${a.join(", ")}, or ${e}`}}(o.length>0||s.length>0)&&(i+=" or ")}if(o.length>0){switch(o.length){case 1:i+=`an instance of ${o[0]}`;break;case 2:i+=`an instance of ${o[0]} or ${o[1]}`;break;default:{let e=o.pop();i+=`an instance of ${o.join(", ")}, or ${e}`}}s.length>0&&(i+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(i+="an "),i+=`${s[0]}`;break;case 2:i+=`one of ${s[0]} or ${s[1]}`;break;default:{let e=s.pop();i+=`one of ${s.join(", ")}, or ${e}`}}if(null==r)i+=`. Received ${r}`;else if("function"==typeof r&&r.name)i+=`. Received function ${r.name}`;else if("object"==typeof r){var u;if(null!==(u=r.constructor)&&void 0!==u&&u.name)i+=`. Received an instance of ${r.constructor.name}`;else{let e=n(r,{depth:-1});i+=`. Received ${e}`}}else{let e=n(r,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),i+=`. Received type ${typeof r} (${e})`}return i},TypeError),E("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let i=n(t);i.length>128&&(i=i.slice(0,128)+"...");let a=e.includes(".")?"property":"argument";return`The ${a} '${e}' ${r}. Received ${i}`},TypeError),E("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var i;let n=null!=r&&null!==(i=r.constructor)&&void 0!==i&&i.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${e} to be returned from the "${t}" function but got ${n}.`},TypeError),E("ERR_MISSING_ARGS",(...e)=>{let t;assert(e.length>0,"At least one arg needs to be specified");let r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{let r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}}return`${t} must be specified`},TypeError),E("ERR_OUT_OF_RANGE",(e,t,r)=>{let i;return assert(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>4294967296?i=addNumericalSeparator(String(r)):"bigint"==typeof r?(i=String(r),(r>2n**32n||r<-(2n**32n))&&(i=addNumericalSeparator(i)),i+="n"):i=n(r),`The value of "${e}" is out of range. It must be ${t}. Received ${i}`},RangeError),E("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),E("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),E("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),E("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),E("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),E("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),E("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),E("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),E("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),E("ERR_STREAM_WRITE_AFTER_END","write after end",Error),E("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:class extends Error{constructor(e="The operation was aborted",t){if(void 0!==t&&"object"!=typeof t)throw new u.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}},aggregateTwoErrors:hideStackFrames(function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;let r=new o([t,e],t.message);return r.code=t.code,r}return e||t}),hideStackFrames,codes:u}},57156:function(e){"use strict";e.exports={ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error,FunctionPrototypeCall:(e,t,...r)=>e.call(t,...r),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Uint8Array}},70780:function(e,t,r){"use strict";let i=r(48764),n=Object.getPrototypeOf(async function(){}).constructor,a=globalThis.Blob||i.Blob;e.exports={AggregateError:class extends Error{constructor(e){if(!Array.isArray(e))throw TypeError(`Expected input to be an Array, got ${typeof e}`);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}
`;super(t),this.name="AggregateError",this.errors=e}},kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...r){t||(t=!0,e.apply(this,r))}},createDeferredPromise:function(){let e,t;let r=new Promise((r,i)=>{e=r,t=i});return{promise:r,resolve:e,reject:t}},promisify:e=>new Promise((t,r)=>{e((e,...i)=>e?r(e):t(...i))}),debuglog:()=>function(){},format:(e,...t)=>e.replace(/%([sdifj])/g,function(...[e,r]){let i=t.shift();if("f"===r)return i.toFixed(6);if("j"===r)return JSON.stringify(i);if("s"!==r||"object"!=typeof i)return i.toString();{let e=i.constructor!==Object?i.constructor.name:"";return`${e} {}`.trim()}}),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":if(isNaN(e))return"NaN";if(Object.is(e,-0))return String(e);return e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}},types:{isAsyncFunction:e=>e instanceof n,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:void 0!==a?function(e){return e instanceof a}:function(e){return!1}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},14730:function(e,t,r){"use strict";let{Buffer:i}=r(48764),{ObjectDefineProperty:n,ObjectKeys:a,ReflectApply:o}=r(57156),{promisify:{custom:s}}=r(70780),{streamReturningOperators:l,promiseReturningOperators:d}=r(27715),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=r(64385),c=r(96171),{pipeline:h}=r(6729),{destroyer:f}=r(39201),p=r(94906),b=r(17578),m=r(66909),y=e.exports=r(85484).Stream;for(let e of(y.isDisturbed=m.isDisturbed,y.isErrored=m.isErrored,y.isReadable=m.isReadable,y.Readable=r(47950),a(l))){let t=l[e];function fn(...e){if(new.target)throw u();return y.Readable.from(o(t,this,e))}n(fn,"name",{__proto__:null,value:t.name}),n(fn,"length",{__proto__:null,value:t.length}),n(y.Readable.prototype,e,{__proto__:null,value:fn,enumerable:!1,configurable:!0,writable:!0})}for(let e of a(d)){let t=d[e];function fn(...e){if(new.target)throw u();return o(t,this,e)}n(fn,"name",{__proto__:null,value:t.name}),n(fn,"length",{__proto__:null,value:t.length}),n(y.Readable.prototype,e,{__proto__:null,value:fn,enumerable:!1,configurable:!0,writable:!0})}y.Writable=r(39713),y.Duplex=r(96665),y.Transform=r(88393),y.PassThrough=r(23058),y.pipeline=h;let{addAbortSignal:g}=r(32264);y.addAbortSignal=g,y.finished=p,y.destroy=f,y.compose=c,n(y,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>b}),n(h,s,{__proto__:null,enumerable:!0,get:()=>b.pipeline}),n(p,s,{__proto__:null,enumerable:!0,get:()=>b.finished}),y.Stream=y,y._isUint8Array=function(e){return e instanceof Uint8Array},y._uint8ArrayToBuffer=function(e){return i.from(e.buffer,e.byteOffset,e.byteLength)}},17578:function(e,t,r){"use strict";let{ArrayPrototypePop:i,Promise:n}=r(57156),{isIterable:a,isNodeStream:o,isWebStream:s}=r(66909),{pipelineImpl:l}=r(6729),{finished:d}=r(94906);r(14730),e.exports={finished:d,pipeline:function(...e){return new n((t,r)=>{let n,d;let u=e[e.length-1];if(u&&"object"==typeof u&&!o(u)&&!a(u)&&!s(u)){let t=i(e);n=t.signal,d=t.end}l(e,(e,i)=>{e?r(e):t(i)},{signal:n,end:d})})}}},35796:function(e,t,r){"use strict";r.d(t,{d:function(){return BaseEvmAdapter}});var i=r(85783);let BaseEvmAdapter=class BaseEvmAdapter extends i.J5{async init(e){this.chainConfig||(this.chainConfig=(0,i.h2)(i.EN.EIP155,1))}async authenticateUser(){if(!this.provider||this.status!==i.MP.CONNECTED)throw i.RM.notConnectedError();let{chainNamespace:e,chainId:t}=this.chainConfig,r=await this.provider.request({method:"eth_accounts"});if(r&&r.length>0){let n=(0,i.Cb)(r[0],this.name);if(n){let e=(0,i.$E)(n);if(!e)return{idToken:n}}let a={domain:window.location.origin,uri:window.location.href,address:r[0],chainId:parseInt(t,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},o=await (0,i.tV)(a,e),s=await this.provider.request({method:"personal_sign",params:[o,r[0]]}),l=await (0,i.rn)(e,s,o,this.name,this.sessionTime,this.clientId,this.web3AuthNetwork);return(0,i.Fr)(r[0],this.name,l),{idToken:l}}throw i.RM.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnectSession(){super.checkDisconnectionRequirements();let e=await this.provider.request({method:"eth_accounts"});e&&e.length>0&&(0,i.qz)(e[0],this.name)}async disconnect(){this.rehydrated=!1,this.emit(i.n2.DISCONNECTED)}}},71604:function(e,t,r){"use strict";r.d(t,{TorusWalletAdapter:function(){return TorusWalletAdapter}});var i=r(1413),n=r(81180),a=r(20917),o=r(81876),s=r(17187),l=r(4445),d=r.n(l),u=r(39428),c=r(12840),h=r.n(c),f=r(30778),p=r.n(f),b=r(74286),m=r.n(b);function noop(){}let BasePostMessageStream=class BasePostMessageStream extends o.Duplex{constructor(e){let{name:t,target:r,targetWindow:i=window,targetOrigin:a="*"}=e;if(super({objectMode:!0}),(0,n.Z)(this,"_init",void 0),(0,n.Z)(this,"_haveSyn",void 0),(0,n.Z)(this,"_name",void 0),(0,n.Z)(this,"_target",void 0),(0,n.Z)(this,"_targetWindow",void 0),(0,n.Z)(this,"_targetOrigin",void 0),(0,n.Z)(this,"_onMessage",void 0),(0,n.Z)(this,"_synIntervalId",void 0),!t||!r)throw Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=t,this._target=r,this._targetWindow=i,this._targetOrigin=a,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write("BRK",null,noop),this._haveSyn=!1,this._init=!1}_handShake(){this._write("SYN",null,noop),this.cork()}_onData(e){if(this._init){if("BRK"===e)this._break();else try{this.push(e)}catch(e){this.emit("error",e)}}else"SYN"===e?(this._haveSyn=!0,this._write("ACK",null,noop)):"ACK"===e&&(this._init=!0,this._haveSyn||this._write("ACK",null,noop),this.uncork())}_postMessage(e){let t=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:e},t)}onMessage(e){let t=e.data;("*"===this._targetOrigin||e.origin===this._targetOrigin)&&e.source===this._targetWindow&&"object"==typeof t&&t.target===this._name&&t.data&&this._onData(t.data)}_read(){}_write(e,t,r){this._postMessage(e),r()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}};function safeApply(e,t,r){try{Reflect.apply(e,t,r)}catch(e){setTimeout(()=>{throw e})}}let SafeEventEmitter=class SafeEventEmitter extends s.EventEmitter{emit(e){let t="error"===e,r=this._events;if(void 0!==r)t=t&&void 0===r.error;else if(!t)return!1;for(var i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];if(t){let e;if(n.length>0&&([e]=n),e instanceof Error)throw e;let t=Error(`Unhandled error.${e?` (${e.message})`:""}`);throw t.context=e,t}let o=r[e];if(void 0===o)return!1;if("function"==typeof o)safeApply(o,this,n);else{let e=o.length,t=function(e){let t=e.length,r=Array(t);for(let i=0;i<t;i+=1)r[i]=e[i];return r}(o);for(let r=0;r<e;r+=1)safeApply(t[r],this,n)}return!0}};let SerializableError=class SerializableError extends Error{constructor(e){let{code:t,message:r,data:i}=e;if(!Number.isInteger(t))throw Error("code must be an integer");if(!r||"string"!=typeof r)throw Error("message must be string");super(r),(0,n.Z)(this,"code",void 0),(0,n.Z)(this,"data",void 0),this.code=t,void 0!==i&&(this.data=i)}toString(){return d()({code:this.code,message:this.message,data:this.data,stack:this.stack})}};let JRPCEngine=class JRPCEngine extends SafeEventEmitter{constructor(){super(),(0,n.Z)(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,r){let i=[],n=null,a=!1;for(let o of r)if([n,a]=await JRPCEngine._runMiddleware(e,t,o,i),a)break;return[n,a,i.reverse()]}static _runMiddleware(e,t,r,i){return new Promise(n=>{let end=e=>{let r=e||t.error;r&&(t.error=(0,u.Xy)(r)),n([r,!0])};try{r(e,t,e=>{t.error?end(t.error):(e&&("function"!=typeof e&&end(new SerializableError({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),i.push(e)),n([null,!1]))},end)}catch(e){end(e)}})}static async _runReturnHandlers(e){for(let t of e)await new Promise((e,r)=>{t(t=>t?r(t):e())})}static _checkForCompletion(e,t,r){if(!("result"in t)&&!("error"in t))throw new SerializableError({code:-32603,message:"Response has no error or result for request"});if(!r)throw new SerializableError({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!=typeof t)throw Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,r,i)=>{try{let[n,a,o]=await JRPCEngine._runAllMiddleware(e,t,this._middleware);if(a)return await JRPCEngine._runReturnHandlers(o),i(n);return r(async e=>{try{await JRPCEngine._runReturnHandlers(o)}catch(t){return e(t)}return e()})}catch(e){return i(e)}}}async _handleBatch(e,t){try{let r=await Promise.all(e.map(this._promiseHandle.bind(this)));if(t)return t(null,r);return r}catch(e){if(t)return t(e);throw e}}_promiseHandle(e){return new Promise(t=>{this._handle(e,(e,r)=>{t(r)})})}async _handle(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){let e=new SerializableError({code:-32603,message:"request must be plain object"});return t(e,{id:void 0,jsonrpc:"2.0",error:e})}if("string"!=typeof e.method){let r=new SerializableError({code:-32603,message:"method must be string"});return t(r,{id:e.id,jsonrpc:"2.0",error:r})}let r=(0,i.Z)({},e),n={id:r.id,jsonrpc:r.jsonrpc},a=null;try{await this._processRequest(r,n)}catch(e){a=e}return a&&(delete n.result,n.error||(n.error=(0,u.Xy)(a))),t(a,n)}async _processRequest(e,t){let[r,i,n]=await JRPCEngine._runAllMiddleware(e,t,this._middleware);if(JRPCEngine._checkForCompletion(e,t,i),await JRPCEngine._runReturnHandlers(n),r)throw r}};let Substream=class Substream extends o.Duplex{constructor(e){let{parent:t,name:r}=e;super({objectMode:!0}),(0,n.Z)(this,"_parent",void 0),(0,n.Z)(this,"_name",void 0),this._parent=t,this._name=r}_read(){}_write(e,t,r){this._parent.push({name:this._name,data:e}),r()}};let y=Symbol("IGNORE_SUBSTREAM");let ObjectMultiplex=class ObjectMultiplex extends o.Duplex{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super((0,i.Z)((0,i.Z)({},e),{},{objectMode:!0})),(0,n.Z)(this,"_substreams",void 0),(0,n.Z)(this,"getStream",void 0),this._substreams={}}createStream(e){if(!e)throw Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw Error(`ObjectMultiplex - Substream for name "${e}" already exists`);let t=new Substream({parent:this,name:e});return this._substreams[e]=t,function(e,t){let r=p()(t);h()(e,{readable:!1},r),h()(e,{writable:!1},r)}(this,e=>t.destroy(e||void 0)),t}ignoreStream(e){if(!e)throw Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=y}_read(){}_write(e,t,r){let{name:i,data:n}=e;if(!i)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),r();let a=this._substreams[i];return a?a!==y&&a.push(n):window.console.warn(`ObjectMultiplex - orphaned data for stream "${i}"`),r()}};var g=r(72378),w=r.n(g),_=r(64063),S=r.n(_),v=r(2043),A=r.n(v),T=r(48764).Buffer;let R={GOOGLE:"google",FACEBOOK:"facebook",TWITCH:"twitch",REDDIT:"reddit",DISCORD:"discord",EMAIL_PASSWORDLESS:"torus-auth0-email-passwordless"},C={[R.GOOGLE]:"tkey-google",[R.FACEBOOK]:"tkey-facebook",[R.TWITCH]:"tkey-twitch",[R.REDDIT]:"tkey-reddit",[R.DISCORD]:"tkey-discord",[R.EMAIL_PASSWORDLESS]:"tkey-auth0-email-passwordless"},I={MOONPAY:"moonpay",WYRE:"wyre",RAMPNETWORK:"rampnetwork",XANPOOL:"xanpool",MERCURYO:"mercuryo",TRANSAK:"transak",BANXA:"banxa"},D={MAINNET:"mainnet",MATIC:"matic",BSC_MAINNET:"bsc_mainnet",AVALANCHE_MAINNET:"avalanche_mainnet",ARBITRUM_MAINNET:"arbitrum_mainnet",OPTIMISM_MAINNET:"optimism_mainnet"},M={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},N={[I.MOONPAY]:["AUD","BGN","BRL","CAD","CHF","CNY","COP","CZK","DKK","DOP","EGP","EUR","GBP","HKD","HRK","IDR","ILS","JPY","JOD","KES","KRW","KWD","LKR","MAD","MXN","MYR","NGN","NOK","NZD","OMR","PEN","PKR","PLN","RON","RUB","SEK","SGD","THB","TRY","TWD","USD","VND","ZAR"],[I.WYRE]:["USD","EUR","GBP","AUD","CAD","NZD","CNY","ARS","BRL","CHF","CLP","COP","CZK","DKK","HKD","ILS","INR","ISK","JPY","KRW","MXN","MYR","NOK","PHP","PLN","SEK","SGD","THB","VND","ZAR"],[I.RAMPNETWORK]:["USD","EUR","GBP","BMD","BAM","BWP","BRL","BGN","COP","CRC","CZK","DKK","DOP","GEL","GTQ","HNL","HUF","ISK","INR","ILS","KZT","KES","KWD","LAK","MKD","MYR","MXN","MDL","MZN","NZD","NGN","PYG","PEN","PLN","RON","RSD","SGD","ZAR","LKR","SEK","CHF","TJS","THB","UYU"],[I.XANPOOL]:["SGD","HKD","THB","PHP","INR","IDR","MYR","AUD","NZD","KRW"],[I.MERCURYO]:["EUR","USD","GBP","TRY","JPY","BRL","NGN","VND","MXN","KRW","PLN","SEK","CHF","CAD","CZK","DKK","BGN","HKD","AUD","INR"],[I.TRANSAK]:["ARS","AUD","BBD","BGN","BMD","BRL","CAD","CHF","CLP","CRC","CZK","DKK","DOP","EUR","FJD","FKP","GBP","GIP","HRK","HUF","IDR","ILS","ISK","JMD","JPY","KES","KRW","MDL","MXN","MYR","NOK","NZD","PEN","PHP","PLN","PYG","RON","SEK","SGD","THB","TRY","TZS","USD","ZAR"],[I.BANXA]:["AUD","CAD","CZK","DKK","EUR","GBP","HKD","JPY","NOK","NZD","NZD","PLN","RUB","SEK","SGD","TRY","USD"]},P=new Set(["ETH","USDT","USDC","TUSD","EOSDT","USD","DAI","GUSD","DKKT","PAX","ILS","RUB","BYN","EUR","GBP","JPY","KRW","PLN","MXN","AUD","BRL","CAD","CHF","KPW","LAK","LBP","LKR","XOF","CNHT","DOGE","UAH","TRY","HKD","XJP","SGD","USC","NZD","NGN","RUR","COP","GHS","EGP","IDR","BHD","CRC","PEN","AED","DOP","PKR","HUF","VND","XAR","LTC","RON","OMR","MYR","DKK","UGX","ZMW","SAR","SEK","GEL","RWF","IRR","TZS","CNY","VEF","BDT","HRK","CLP","THB","XAF","ARS","UYU","SZL","KZT","NOK","KES","PAB","INR","CZK","MAD","TWD","PHP","ZAR","BOB","CDF","DASH","VES","ISK","MWK","BAM","TTD","XRP","JOD","RSD","HNL","BGN","GTQ","BWP","XMR","MMK","QAR","AOA","KWD","MUR","WUSD","WEUR","WAVES","WTRY","LRD","LSL","LYD","AWG","MDL","BTO","EURS","CHFT","MKD","MNT","MOP","MRO","MVR","VOLLAR","CKUSD","KHR","VUV","BITCNY","QC","BBD","NAD","NPR","PGK","PYG","BIF","BMD","BND","XLM","BNB","SCR","BAT","CRO","HT","KCS","LEO","LINK","MKR","NPXS","OMG","REP","ZB","ZIL","ZRX","BCH","BZD","CUP","CVE","DJF","DZD","ERN","ETB","FJD","FKP","BUSD","ANCT","ALL","AMD","ANG","CNYX","IQD","UZS","TND","GGP","XAU","KGS","GIP","JMD","ZEC","USDP","BSV","EMC2","SNT","GTO","POWR","EUSD","EURT","BCY","BTS","ATM","BLOCKPAY","ARDR","AMP","B2X","BITGOLD","BITEUR","ATB","BITUSD","AGRS","DFXT","HIKEN","BIX","KNC","EOS","COB","COSS","BMH","NANO","BDG","BNT","XVG","LKK1Y","LKK","USDK","EURN","NZDT","JSE","GMD","GNF","GYD","YER","XPF","HTG","SLL","SOS","WST","SVC","SYP","NEO","KMF","JUMP","AYA","BLAST","WGR","BCN","BTG","URALS","INN","USDQ","CNH","HUSD","BKRW","NZDX","EURX","CADX","USDEX","JPYX","AUDX","VNDC","EON","GBPX","CHFX","USDJ","IDRT","USDS","USDN","BIDR","IDK","BSD","BTN","KYD","NIO","SBD","SDG","SHP","TOP","XCD","XCHF","CNYT","GYEN","ZUSD","GOLD","TRX","TRYB","PLATC","STRAX","UST","GLM","VAI","BRZ","DDRST","XAUT","MIM"]);function supportedFiatCurrencies(e){let t=N[e];return t.filter(e=>P.has(e))}let k={[I.MOONPAY]:{line1:"Credit/ Debit Card/ Apple Pay",line2:"4.5% or 5 USD",line3:"2,000€/day, 10,000€/mo",supportPage:"https://help.moonpay.io/en/",minOrderValue:24.99,maxOrderValue:5e4,validCurrencies:supportedFiatCurrencies(I.MOONPAY),validCryptoCurrenciesByChain:{[D.MAINNET]:[{value:"aave",display:"AAVE"},{value:"bat",display:"BAT"},{value:"dai",display:"DAI"},{value:"eth",display:"ETH"},{value:"mkr",display:"MKR"},{value:"matic",display:"MATIC"},{value:"usdt",display:"USDT"},{value:"uni",display:"UNI"},{value:"usdc",display:"USDC"},{value:"weth",display:"WETH"}],[D.MATIC]:[{value:"eth_polygon",display:"ETH"},{value:"matic_polygon",display:"MATIC"},{value:"usdc_polygon",display:"USDC"},{value:"usdt_polygon",display:"USDT"}],[D.BSC_MAINNET]:[{value:"bnb_bsc",display:"BNB"},{value:"busd_bsc",display:"BUSD"}],[D.AVALANCHE_MAINNET]:[{value:"avax_cchain",display:"AVAX"},{value:"usdc_cchain",display:"USDC"}],[D.ARBITRUM_MAINNET]:[{value:"eth_arbitrum",display:"ETH"},{value:"usdc_arbitrum",display:"USDC"}],[D.OPTIMISM_MAINNET]:[{value:"eth_optimism",display:"ETH"},{value:"usdc_optimism",display:"USDC"}]},includeFees:!0,api:!0,enforceMax:!1},[I.WYRE]:{line1:"Apple Pay/ Debit/ Credit Card",line2:"4.9% + 30\xa2 or 5 USD",line3:"$250/day",supportPage:"https://support.sendwyre.com/en/",minOrderValue:5,maxOrderValue:500,validCurrencies:supportedFiatCurrencies(I.WYRE),validCryptoCurrenciesByChain:{[D.MAINNET]:[{value:"AAVE",display:"AAVE"},{value:"COMP",display:"COMP"},{value:"BAT",display:"BAT"},{value:"BUSD",display:"BUSD"},{value:"DAI",display:"DAI"},{value:"ETH",display:"ETH"},{value:"WBTC",display:"WBTC"},{value:"MKR",display:"MKR"},{value:"UNI",display:"UNI"},{value:"WETH",display:"WETH"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"}],[D.MATIC]:[{value:"mUSDC",display:"USDC"},{value:"MATIC",display:"MATIC"},{value:"MWETH",display:"WETH"}],[D.AVALANCHE_MAINNET]:[{value:"AVAXC",display:"AVAX"},{value:"AVAXCUSDC",display:"USDC"}],[D.BSC_MAINNET]:[{value:"BNB",display:"BNB"},{value:"BBUSD",display:"BUSD"}]},includeFees:!1,api:!0,enforceMax:!1},[I.RAMPNETWORK]:{line1:"Debit Card/ <br>Apple Pay/ Bank transfer",line2:"0.49% - 2.9%",line3:"5,000€/purchase, 20,000€/mo",supportPage:"https://instant.ramp.network/",minOrderValue:50,maxOrderValue:2e4,validCurrencies:supportedFiatCurrencies(I.RAMPNETWORK),validCryptoCurrenciesByChain:{[D.MAINNET]:[{value:"ETH",display:"ETH"},{value:"DAI",display:"DAI"},{value:"BAT",display:"BAT"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"}],[D.MATIC]:[{value:"MATIC_BAT",display:"BAT"},{value:"MATIC_DAI",display:"DAI"},{value:"MATIC_MATIC",display:"MATIC"},{value:"MATIC_USDC",display:"USDC"},{value:"MATIC_USDT",display:"USDT"}],[D.AVALANCHE_MAINNET]:[{value:"AVAX_AVAX",display:"AVAX"},{value:"AVAX_USDC",display:"USDC"},{value:"AVAX_USDT",display:"USDT"}],[D.ARBITRUM_MAINNET]:[{value:"ARBITRUM_ETH",display:"ETH"},{value:"ARBITRUM_USDC.e	",display:"USDC"},{value:"ARBITRUM_USDT",display:"USDT"}],[D.OPTIMISM_MAINNET]:[{value:"OPTIMISM_DAI",display:"DAI"},{value:"OPTIMISM_OPTIMISM",display:"OPTIMISM"},{value:"OPTIMISM_USDC",display:"USDC"},{value:"OPTIMISM_USDT",display:"USDT"}],[D.BSC_MAINNET]:[{value:"BSC_BNB",display:"BNB"},{value:"BSC_BUSD",display:"BUSD"}]},includeFees:!0,api:!0,receiveHint:"walletTopUp.receiveHintRamp",enforceMax:!1},[I.XANPOOL]:{line1:"PayNow/ InstaPay/ FPS/ GoJekPay/ UPI/ PromptPay/ <br>ViettelPay/ DuitNow",line2:"2.5% buying, 3% selling",line3:"$2,500 / day",supportPage:"mailto:support@xanpool.com",minOrderValue:100,maxOrderValue:2500,validCurrencies:supportedFiatCurrencies(I.XANPOOL),validCryptoCurrenciesByChain:{[D.MAINNET]:[{value:"ETH",display:"ETH"},{value:"USDT",display:"USDT"},{value:"USDC",display:"USDC"}]},includeFees:!0,api:!0,sell:!0,enforceMax:!1},[I.MERCURYO]:{line1:"Credit/ Debit Card/ Apple Pay",line2:"3.95% or 4 USD",line3:"10,000€/day, 25,000€/mo",supportPage:"mailto:support@mercuryo.io",minOrderValue:30,maxOrderValue:5e3,validCurrencies:supportedFiatCurrencies(I.MERCURYO),validCryptoCurrenciesByChain:{[D.MAINNET]:[{value:"ETH",display:"ETH"},{value:"BAT",display:"BAT"},{value:"USDT",display:"USDT"},{value:"DAI",display:"DAI"}],[D.BSC_MAINNET]:[{value:"BNB",display:"BNB"},{value:"BUSD",display:"BUSD"},{value:"1INCH",display:"1INCH"}],[D.AVALANCHE_MAINNET]:[{value:"AVAX",display:"AVAX"}],[D.MATIC]:[{value:"MATIC",display:"MATIC"}]},includeFees:!0,api:!0,enforceMax:!1},[I.TRANSAK]:{line1:"Apple & Google Pay / Credit/Debit Card<br/>Bangkok Bank Mobile & iPay<br/>Bank Transfer (sepa/gbp) / SCB Mobile & Easy",line2:"0.99% - 5.5% or 5 USD",line3:"$5,000/day, $28,000/mo",supportPage:"https://support.transak.com/hc/en-US",minOrderValue:30,maxOrderValue:500,validCurrencies:supportedFiatCurrencies(I.TRANSAK),validCryptoCurrenciesByChain:{[D.MAINNET]:[{value:"1INCH",display:"1INCH"},{value:"BAT",display:"BAT"},{value:"AAVE",display:"AAVE"},{value:"DAI",display:"DAI"},{value:"ETH",display:"ETH"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"}],[D.MATIC]:[{value:"BAT",display:"BAT"},{value:"AAVE",display:"AAVE"},{value:"DAI",display:"DAI"},{value:"MATIC",display:"MATIC"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"},{value:"WETH",display:"WETH"}],[D.BSC_MAINNET]:[{value:"BAT",display:"BAT"},{value:"BNB",display:"BNB"},{value:"BUSD",display:"BUSD"}],[D.AVALANCHE_MAINNET]:[{value:"AVAX",display:"AVAX"}],[D.OPTIMISM_MAINNET]:[{value:"ETH",display:"ETH"},{value:"USDC",display:"USDC"}],[D.ARBITRUM_MAINNET]:[{value:"USDC",display:"USDC"},{value:"ETH",display:"ETH"}]},includeFees:!0,enforceMax:!0},[I.BANXA]:{line1:"Debit Card/ <br>Apple Pay/ Bank transfer",line2:"0.49% - 2.9%",line3:"5,000€/purchase, 20,000€/mo",supportPage:"https://support.banxa.com",minOrderValue:20,maxOrderValue:15e3,validCurrencies:supportedFiatCurrencies(I.BANXA),validCryptoCurrenciesByChain:{[D.MAINNET]:[{value:"ETH",display:"ETH"},{value:"DAI",display:"DAI"},{value:"MKR",display:"MKR"},{value:"USDT",display:"USDT"},{value:"BUSD",display:"BUSD"},{value:"USDC",display:"USDC"},{value:"BAT",display:"BAT"},{value:"AAVE",display:"AAVE"},{value:"COMP",display:"COMP"},{value:"UNI",display:"UNI"}],[D.MATIC]:[{value:"MATIC",display:"MATIC"}]},includeFees:!0,enforceMax:!0}};var O={supportedVerifierList:Object.values(R),paymentProviders:k,api:"https://api.tor.us",translations:{en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies ben\xf6tigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}},prodTorusUrl:"",localStorageKeyPrefix:"torus-"};let htmlToElement=e=>{let t=window.document.createElement("template"),r=e.trim();return t.innerHTML=r,t.content.firstChild},handleStream=(e,t,r)=>{let handlerWrapper=i=>{r(i),e.removeListener(t,handlerWrapper)};e.on(t,handlerWrapper)};function isStream(e){return null!==e&&"object"==typeof e&&"function"==typeof e.pipe}var x=A().getLogger("torus-embed"),L={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",sendSiteMetadata:()=>"Torus: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:e=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:(e,t)=>`Invalid options. Received: { maxEventListeners: ${e}, shouldSendMetadata: ${t} }`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},info:{connected:e=>`Torus: Connected to chain with ID "${e}".`}};let{paymentProviders:W}=O,validatePaymentProvider=(e,t)=>{let r={};if(!e)return{errors:r,isValid:!0};if(e&&!W[e])return r.provider="Invalid Provider",{errors:r,isValid:0===Object.keys(r).length};let i=W[e],n=t||{};if(n.fiatValue){let e=+parseFloat(n.fiatValue.toString())||0;e<i.minOrderValue&&(r.fiatValue="Requested amount is lower than supported"),e>i.maxOrderValue&&i.enforceMax&&(r.fiatValue="Requested amount is higher than supported")}if(n.selectedCurrency&&!i.validCurrencies.includes(n.selectedCurrency)&&(r.selectedCurrency="Unsupported currency"),n.selectedCryptoCurrency){let t=Object.values(i.validCryptoCurrenciesByChain).flat().map(e=>e.value),a=e===I.MOONPAY?n.selectedCryptoCurrency.toLowerCase():n.selectedCryptoCurrency;t&&!t.includes(a)&&(r.selectedCryptoCurrency="Unsupported cryptoCurrency")}return{errors:r,isValid:0===Object.keys(r).length}},getPreopenInstanceId=()=>Math.random().toString(36).slice(2),getTorusUrl=async(e,t)=>{let r,i;let n="4.0.7",o=t.version||n;try{if(("binance"===e||"production"===e)&&!t.version){let e;o=(e=O.prodTorusUrl?{data:O.prodTorusUrl}:await (0,a.U2)(`${O.api}/latestversion?name=@toruslabs/torus-embed&version=${n}`,{},{useAPIKey:!0})).data,O.prodTorusUrl=e.data}}catch(e){x.error(e,"unable to fetch latest version")}switch(x.info("version used: ",o),e){case"binance":r=`https://binance.tor.us/v${o}`,i="info";break;case"testing":r="https://testing.tor.us",i="debug";break;case"bnb":r="https://bnb.tor.us",i="error";break;case"polygon":r="https://polygon.tor.us",i="error";break;case"lrc":r="https://lrc.tor.us",i="debug";break;case"beta":r="https://beta.tor.us",i="debug";break;case"development":r="http://localhost:4050",i="debug";break;case"alpha":r="https://alpha.tor.us",i="debug";break;default:r=`https://app.tor.us/v${o}`,i="error"}return{torusUrl:r,logLevel:i}},getUserLanguage=()=>{let e=window.navigator.language||"en-US",t=e.split("-");return Object.prototype.hasOwnProperty.call(O.translations,t[0])?t[0]:"en"},U=["eth_subscription"],NOOP=()=>{},B="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=660,width=375",j="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=450";SafeEventEmitter.defaultMaxListeners=100;let torus_esm_getRpcPromiseCallback=function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return(i,n)=>i||n.error?t(i||n.error):!r||Array.isArray(n)?e(n):e(n.result)};let TorusInpageProvider=class TorusInpageProvider extends SafeEventEmitter{constructor(e){var t;let{maxEventListeners:r=100,shouldSendMetadata:a=!0,jsonRpcStreamName:s="provider"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(super(),(0,n.Z)(this,"chainId",void 0),(0,n.Z)(this,"selectedAddress",void 0),(0,n.Z)(this,"_rpcEngine",void 0),(0,n.Z)(this,"networkVersion",void 0),(0,n.Z)(this,"shouldSendMetadata",void 0),(0,n.Z)(this,"isTorus",void 0),(0,n.Z)(this,"tryPreopenHandle",void 0),(0,n.Z)(this,"enable",void 0),(0,n.Z)(this,"_state",void 0),(0,n.Z)(this,"_jsonRpcConnection",void 0),!(isStream(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState&&isStream(t=e)&&!1!==t.readable&&"function"==typeof t._read&&"object"==typeof t._readableState))throw Error(L.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(r),this._state=(0,i.Z)({},TorusInpageProvider._defaultState),this.selectedAddress=null,this.networkVersion=null,this.chainId=null,this.shouldSendMetadata=a,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._sendSync=this._sendSync.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this);let l=new ObjectMultiplex;m()(e,l,e,this._handleStreamDisconnect.bind(this,"MetaMask")),l.ignoreStream("phishing"),this.on("connect",()=>{this._state.isConnected=!0});let d=function(){let e={},t=new SafeEventEmitter,r=new o.Duplex({objectMode:!0,read:function(){return!1},write:function(r,i,n){let a;try{let i=!r.id;i?t.emit("notification",r):!function(t){let r=e[t.id];if(!r)throw Error(`StreamMiddleware - Unknown response id "${t.id}"`);delete e[t.id],Object.assign(r.res,t),setTimeout(r.end)}(r)}catch(e){a=e}n(a)}});return{events:t,middleware:(t,i,n,a)=>{r.push(t),e[t.id]={req:t,res:i,next:n,end:a}},stream:r}}();m()(d.stream,l.createStream(s),d.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider"));let c=new JRPCEngine;c.push((e,t,r,i)=>{let n=e.id,a=Math.random().toString(36).slice(2);e.id=a,t.id=a,r(r=>{e.id=n,t.id=n,r()})}),c.push((e,t,r)=>{"string"==typeof e.method&&e.method||(t.error=u.PY.invalidRequest({message:"The request 'method' must be a non-empty string.",data:(0,i.Z)((0,i.Z)({},e||{}),{},{cause:"The request 'method' must be a non-empty string."})})),r(e=>{let{error:r}=t;return r&&x.error(`MetaMask - RPC Error: ${r.message}`,r),e()})}),c.push(d.middleware),this._rpcEngine=c,d.events.on("notification",e=>{let{method:t,params:r}=e;"wallet_accountsChanged"===t?this._handleAccountsChanged(r):"wallet_unlockStateChanged"===t?this._handleUnlockStateChanged(r):"wallet_chainChanged"===t?this._handleChainChanged(r):U.includes(e.method)&&(this.emit("data",e),this.emit("notification",r.result),this.emit("message",{type:t,data:r}))})}isConnected(){return this._state.isConnected}async request(e){if(!e||"object"!=typeof e||Array.isArray(e))throw u.PY.invalidRequest({message:L.errors.invalidRequestArgs(),data:(0,i.Z)((0,i.Z)({},e||{}),{},{cause:L.errors.invalidRequestArgs()})});let{method:t,params:r}=e;if("string"!=typeof t||0===t.length)throw u.PY.invalidRequest({message:L.errors.invalidRequestMethod(),data:(0,i.Z)((0,i.Z)({},e||{}),{},{cause:L.errors.invalidRequestArgs()})});if(void 0!==r&&!Array.isArray(r)&&("object"!=typeof r||null===r))throw u.PY.invalidRequest({message:L.errors.invalidRequestParams(),data:(0,i.Z)((0,i.Z)({},e||{}),{},{cause:L.errors.invalidRequestArgs()})});return new Promise((e,i)=>{this._rpcRequest({method:t,params:r},torus_esm_getRpcPromiseCallback(e,i))})}sendAsync(e,t){this._rpcRequest(e,t)}async _initializeState(){try{let{accounts:e,chainId:t,isUnlocked:r,networkVersion:i}=await this.request({method:"wallet_getProviderState"});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t,networkVersion:i}),this._handleUnlockStateChanged({accounts:e,isUnlocked:r}),this._handleAccountsChanged(e)}catch(e){x.error("MetaMask: Failed to get initial state. Please report this bug.",e)}finally{x.info("initialized state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t;if(!Array.isArray(e)){if(e.jsonrpc||(e.jsonrpc="2.0"),"eth_accounts"===e.method||"eth_requestAccounts"===e.method)i=(i,n)=>{this._handleAccountsChanged(n.result||[],"eth_accounts"===e.method,r),t(i,n)};else if("wallet_getProviderState"===e.method){this._rpcEngine.handle(e,i);return}}this.tryPreopenHandle(e,i)}send(e,t){return"string"==typeof e&&(!t||Array.isArray(t))?new Promise((r,i)=>{try{this._rpcRequest({method:e,params:t},torus_esm_getRpcPromiseCallback(r,i,!1))}catch(e){i(e)}}):e&&"object"==typeof e&&"function"==typeof t?this._rpcRequest(e,t):this._sendSync(e)}_sendSync(e){let t;switch(e.method){case"eth_accounts":t=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":t=this.selectedAddress||null;break;case"eth_uninstallFilter":this._rpcRequest(e,NOOP),t=!0;break;case"net_version":t=this.networkVersion||null;break;default:throw Error(L.errors.unsupportedSync(e.method))}return{id:e.id,jsonrpc:e.jsonrpc,result:t}}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),x.debug(L.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new u.yd(1013,t||L.errors.disconnected()),x.debug(r)):(r=new u.yd(1011,t||L.errors.permanentlyDisconnected()),x.error(r),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleStreamDisconnect(e,t){let r;r=`MetaMask: Lost connection to "${e}".`,null!=t&&t.stack&&(r+=`
${t.stack}`),x.warn(r),this&&this.listenerCount("error")>0&&this.emit("error",r),this._handleDisconnect(!1,t?t.message:void 0)}_handleAccountsChanged(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e;for(let t of(Array.isArray(i)||(x.error("MetaMask: Received non-array accounts parameter. Please report this bug.",i),i=[]),e))if("string"!=typeof t){x.error("MetaMask: Received non-string account. Please report this bug.",e),i=[];break}S()(this._state.accounts,i)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!r&&x.error('MetaMask: "eth_accounts" unexpectedly updated accounts. Please report this bug.',i),this._state.accounts=i,this.emit("accountsChanged",i)),this.selectedAddress!==i[0]&&(this.selectedAddress=i[0]||null)}_handleChainChanged(){let{chainId:e,networkVersion:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e||!t){x.error("MetaMask: Received invalid network parameters. Please report this bug.",{chainId:e,networkVersion:t});return}"loading"===t?this._handleDisconnect(!0):(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:e,isUnlocked:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("boolean"!=typeof t){x.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:t});return}t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[]))}};(0,n.Z)(TorusInpageProvider,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});let PopupHandler=class PopupHandler extends SafeEventEmitter{constructor(e){let{url:t,target:r,features:i,timeout:a=3e4}=e;super(),(0,n.Z)(this,"url",void 0),(0,n.Z)(this,"target",void 0),(0,n.Z)(this,"features",void 0),(0,n.Z)(this,"window",void 0),(0,n.Z)(this,"windowTimer",void 0),(0,n.Z)(this,"iClosedWindow",void 0),(0,n.Z)(this,"timeout",void 0),this.url=t,this.target=r||"_blank",this.features=i||function(){let e=void 0!==window.screenLeft?window.screenLeft:window.screenX,t=void 0!==window.screenTop?window.screenTop:window.screenY,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,i=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,n=`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=1200,top=${Math.abs((i-700)/2/1+t)},left=${Math.abs((r-1200)/2/1+e)}`;return n}(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=a,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),void 0===this.window&&clearInterval(this.windowTimer)},500))}open(){var e;this.window=window.open(this.url.href,this.target,this.features),null!==(e=this.window)&&void 0!==e&&e.focus&&this.window.focus()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}};function imgExists(e){return new Promise((t,r)=>{try{let r=document.createElement("img");r.onload=()=>t(!0),r.onerror=()=>t(!1),r.src=e}catch(e){r(e)}})}let getSiteName=e=>{let{document:t}=e,r=t.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;let i=t.querySelector('head > meta[name="title"]');return i?i.content:t.title&&t.title.length>0?t.title:e.location.hostname};async function getSiteIcon(e){let{document:t}=e,r=t.querySelector('head > link[rel="shortcut icon"]');return r&&await imgExists(r.href)||(r=Array.from(t.querySelectorAll('head > link[rel="icon"]')).find(e=>!!e.href))&&await imgExists(r.href)?r.href:null}let getSiteMetadata=async()=>({name:getSiteName(window),icon:await getSiteIcon(window)});async function sendSiteMetadata(e){try{let t=await getSiteMetadata();e.handle({jsonrpc:"2.0",id:getPreopenInstanceId(),method:"wallet_sendDomainMetadata",params:t},NOOP)}catch(e){x.error({message:L.errors.sendSiteMetadata(),originalError:e})}}let H=["host","chainId","networkName"],F=["eth_sendTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","eth_getEncryptionPublicKey","eth_decrypt","wallet_addEthereumChain","wallet_switchEthereumChain"];!async function(){try{if("undefined"==typeof document)return;let e=document.createElement("link"),{torusUrl:t}=await getTorusUrl("production",{version:""});e.href=`${t}/popup`,e.crossOrigin="anonymous",e.type="text/html",e.rel="prefetch",e.relList&&e.relList.supports&&e.relList.supports("prefetch")&&document.head.appendChild(e)}catch(e){x.warn(e)}}();let Torus=class Torus{constructor(){let{buttonPosition:e=M.BOTTOM_LEFT,buttonSize:t=56,modalZIndex:r=99999,apiKey:i="torus-default"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.Z)(this,"buttonPosition",M.BOTTOM_LEFT),(0,n.Z)(this,"buttonSize",void 0),(0,n.Z)(this,"torusUrl",void 0),(0,n.Z)(this,"torusIframe",void 0),(0,n.Z)(this,"styleLink",void 0),(0,n.Z)(this,"isLoggedIn",void 0),(0,n.Z)(this,"isInitialized",void 0),(0,n.Z)(this,"torusWidgetVisibility",void 0),(0,n.Z)(this,"torusAlert",void 0),(0,n.Z)(this,"apiKey",void 0),(0,n.Z)(this,"modalZIndex",void 0),(0,n.Z)(this,"alertZIndex",void 0),(0,n.Z)(this,"torusAlertContainer",void 0),(0,n.Z)(this,"isIframeFullScreen",void 0),(0,n.Z)(this,"whiteLabel",void 0),(0,n.Z)(this,"requestedVerifier",void 0),(0,n.Z)(this,"currentVerifier",void 0),(0,n.Z)(this,"embedTranslations",void 0),(0,n.Z)(this,"ethereum",void 0),(0,n.Z)(this,"provider",void 0),(0,n.Z)(this,"communicationMux",void 0),(0,n.Z)(this,"isLoginCallback",void 0),(0,n.Z)(this,"paymentProviders",O.paymentProviders),(0,n.Z)(this,"loginHint",""),(0,n.Z)(this,"useWalletConnect",void 0),(0,n.Z)(this,"isCustomLogin",!1),this.buttonPosition=e,this.buttonSize=t,this.torusUrl="",this.isLoggedIn=!1,this.isInitialized=!1,this.torusWidgetVisibility=!0,this.requestedVerifier="",this.currentVerifier="",this.apiKey=i,(0,a.ut)(i),this.modalZIndex=r,this.alertZIndex=r+1e3,this.isIframeFullScreen=!1}async init(){let{buildEnv:e="production",enableLogging:t=!1,network:r={host:"mainnet",chainId:null,networkName:"",blockExplorer:"",ticker:"",tickerName:""},loginConfig:i={},showTorusButton:n=!0,integrity:a={version:""},whiteLabel:o,useWalletConnect:s=!1,mfaLevel:l="default"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isInitialized)throw Error("Already initialized");let{torusUrl:d,logLevel:u}=await getTorusUrl(e,a);x.info(d,"url loaded"),this.torusUrl=d,this.whiteLabel=o,this.useWalletConnect=s,this.isCustomLogin=!!(i&&Object.keys(i).length>0)||!!(o&&Object.keys(o).length>0),x.setDefaultLevel(u),t?x.enableAll():x.disableAll(),this.torusWidgetVisibility=n;let c=new URL(d);c.pathname.endsWith("/")?c.pathname+="popup":c.pathname+="/popup",c.hash=`#isCustomLogin=${this.isCustomLogin}`,this.torusIframe=htmlToElement(`<iframe
        id="torusIframe"
        allow=${s?"camera":""}
        class="torusIframe"
        src="${c.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%; color-scheme: none;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex}"
      ></iframe>`),this.torusAlertContainer=htmlToElement('<div id="torusAlertContainer"></div>'),this.torusAlertContainer.style.display="none",this.torusAlertContainer.style.setProperty("z-index",this.alertZIndex.toString());let h=window.document.createElement("link");h.setAttribute("rel","stylesheet"),h.setAttribute("type","text/css"),h.setAttribute("href",`${d}/css/widget.css`),this.styleLink=h;let{defaultLanguage:f=getUserLanguage(),customTranslations:p={}}=this.whiteLabel||{},b=w()(O.translations,p),m=b[f]||O.translations[getUserLanguage()];return this.embedTranslations=m.embed,new Promise((e,t)=>{this.torusIframe.onload=async()=>{this._setupWeb3();let n=this.communicationMux.getStream("init_stream");n.on("data",r=>{let{name:i,data:n,error:a}=r;"init_complete"===i&&n.success?(this.isInitialized=!0,this._displayIframe(this.isIframeFullScreen),e(void 0)):a&&t(Error(a))}),n.write({name:"init_stream",data:{loginConfig:i,whiteLabel:this.whiteLabel,buttonPosition:this.buttonPosition,buttonSize:this.buttonSize,torusWidgetVisibility:this.torusWidgetVisibility,apiKey:this.apiKey,network:r,mfaLevel:l}})},window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)})}login(){let{verifier:e="",login_hint:t=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isInitialized)throw Error("Call init() first");return this.requestedVerifier=e,this.loginHint=t,this.ethereum.enable()}logout(){return new Promise((e,t)=>{if(!this.isLoggedIn){t(Error("User has not logged in yet"));return}let r=this.communicationMux.getStream("logout");r.write({name:"logOut"});let i=this.communicationMux.getStream("status");handleStream(i,"data",r=>{r.loggedIn?t(Error("Some Error Occured")):(this.isLoggedIn=!1,this.currentVerifier="",this.requestedVerifier="",e())})})}async cleanUp(){this.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function isElement(e){return e instanceof Element||e instanceof HTMLDocument}isElement(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),isElement(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),isElement(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.torusWidgetVisibility=!1,this._sendWidgetVisibilityStatus(!1),this._displayIframe()}showTorusButton(){this.torusWidgetVisibility=!0,this._sendWidgetVisibilityStatus(!0),this._displayIframe()}setProvider(e){let{host:t="mainnet",chainId:r=null,networkName:n=""}=e,a=function(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,H);return new Promise((e,o)=>{let s=this.communicationMux.getStream("provider_change");handleStream(s,"data",t=>{let{err:r,success:i}=t.data;x.info(t),r?o(r):i?e():o(Error("some error occurred"))});let l=getPreopenInstanceId();this._handleWindow(l,{target:"_blank",features:B}),s.write({name:"show_provider_change",data:{network:(0,i.Z)({host:t,chainId:r,networkName:n},a),preopenInstanceId:l,override:!1}})})}showWallet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.communicationMux.getStream("show_wallet"),i=e?`/${e}`:"";r.write({name:"show_wallet",data:{path:i}}),handleStream(r,"data",e=>{if("show_wallet_instance"===e.name){let{instanceId:r}=e.data,n=new URL(`${this.torusUrl}/wallet${i}`);n.searchParams.append("integrity","true"),n.searchParams.append("instanceId",r),Object.keys(t).forEach(e=>{n.searchParams.append(e,t[e])}),n.hash=`#isCustomLogin=${this.isCustomLogin}`;let a=new PopupHandler({url:n,features:"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=740,width=1315"});a.open()}})}async getPublicAddress(e){let{verifier:t,verifierId:r,isExtended:i=!1}=e;if(!O.supportedVerifierList.includes(t)||!C[t])throw Error("Unsupported verifier");let n=C[t],o=new URL("https://api.tor.us/lookup/torus");return o.searchParams.append("verifier",n),o.searchParams.append("verifierId",r),o.searchParams.append("walletVerifier",t),o.searchParams.append("network","mainnet"),o.searchParams.append("isExtended",i.toString()),(0,a.U2)(o.href,{headers:{"Content-Type":"application/json; charset=utf-8"}},{useAPIKey:!0})}getUserInfo(e){return new Promise((t,r)=>{if(this.isLoggedIn){let i=this.communicationMux.getStream("user_info_access");i.write({name:"user_info_access_request"}),handleStream(i,"data",i=>{let{name:n,data:{approved:a,payload:o,rejected:s,newRequest:l}}=i;if("user_info_access_response"===n){if(a)t(o);else if(s)r(Error("User rejected the request"));else if(l){let i=this.communicationMux.getStream("user_info");handleStream(i,"data",e=>{"user_info_response"===e.name&&(e.data.approved?t(e.data.payload):r(Error("User rejected the request")))});let n=getPreopenInstanceId();this._handleWindow(n,{target:"_blank",features:B}),i.write({name:"user_info_request",data:{message:e,preopenInstanceId:n}})}}})}else r(Error("User has not logged in yet"))})}initiateTopup(e,t){return new Promise((r,i)=>{if(this.isInitialized){let{errors:n,isValid:a}=validatePaymentProvider(e,t);if(!a){i(Error(JSON.stringify(n)));return}let o=this.communicationMux.getStream("topup");handleStream(o,"data",e=>{"topup_response"===e.name&&(e.data.success?r(e.data.success):i(Error(e.data.error)))});let s=getPreopenInstanceId();this._handleWindow(s),o.write({name:"topup_request",data:{provider:e,params:t,preopenInstanceId:s}})}else i(Error("Torus is not initialized yet"))})}async loginWithPrivateKey(e){let{privateKey:t,userInfo:r}=e;return new Promise((e,i)=>{if(this.isInitialized){if(32!==T.from(t,"hex").length){i(Error("Invalid private key, Please provide a 32 byte valid secp25k1 private key"));return}let n=this.communicationMux.getStream("login_with_private_key");handleStream(n,"data",t=>{"login_with_private_key_response"===t.name&&(t.data.success?e(t.data.success):i(Error(t.data.error)))}),n.write({name:"login_with_private_key_request",data:{privateKey:t,userInfo:r}})}else i(Error("Torus is not initialized yet"))})}async showWalletConnectScanner(){if(!this.useWalletConnect)throw Error("Set `useWalletConnect` as true in init function options to use wallet connect scanner");return new Promise((e,t)=>{if(this.isLoggedIn){let r=this.communicationMux.getStream("wallet_connect_stream");handleStream(r,"data",r=>{"wallet_connect_stream_res"===r.name&&(r.data.success?e(r.data.success):t(Error(r.data.error)),this._displayIframe())}),r.write({name:"wallet_connect_stream_req"}),this._displayIframe(!0)}else t(Error("User has not logged in yet"))})}_handleWindow(e){let{url:t,target:r,features:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){let n=this.communicationMux.getStream("window"),a=new URL(t||`${this.torusUrl}/redirect?preopenInstanceId=${e}`);a.hash?a.hash+=`&isCustomLogin=${this.isCustomLogin}`:a.hash=`#isCustomLogin=${this.isCustomLogin}`;let o=new PopupHandler({url:a,target:r,features:i});if(o.open(),!o.window){this._createPopupBlockAlert(e,a.href);return}n.write({name:"opened_window",data:{preopenInstanceId:e}});let closeHandler=t=>{let{preopenInstanceId:r,close:i}=t;r===e&&i&&(o.close(),n.removeListener("data",closeHandler))};n.on("data",closeHandler),o.once("close",()=>{n.write({data:{preopenInstanceId:e,closed:!0}}),n.removeListener("data",closeHandler)})}}_setEmbedWhiteLabel(e){let{theme:t}=this.whiteLabel||{};if(t){let{isDark:r=!1,colors:i={}}=t;r&&e.classList.add("torus-dark"),i.torusBrand1&&e.style.setProperty("--torus-brand-1",i.torusBrand1),i.torusGray2&&e.style.setProperty("--torus-gray-2",i.torusGray2)}}_getLogoUrl(){var e,t,r;let i=`${this.torusUrl}/images/torus_icon-blue.svg`;return null!==(e=this.whiteLabel)&&void 0!==e&&null!==(e=e.theme)&&void 0!==e&&e.isDark?(null===(t=this.whiteLabel)||void 0===t?void 0:t.logoLight)||i:(null===(r=this.whiteLabel)||void 0===r?void 0:r.logoDark)||i}_sendWidgetVisibilityStatus(e){let t=this.communicationMux.getStream("torus-widget-visibility");t.write({data:e})}_displayIframe(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={},r=this.buttonSize+14;if(e)t.display="block",t.width="100%",t.height="100%",t.top="0px",t.right="0px",t.left="0px",t.bottom="0px";else switch(t.display=this.torusWidgetVisibility?"block":"none",t.height=`${r}px`,t.width=`${r}px`,this.buttonPosition){case M.TOP_LEFT:t.top="0px",t.left="0px",t.right="auto",t.bottom="auto";break;case M.TOP_RIGHT:t.top="0px",t.right="0px",t.left="auto",t.bottom="auto";break;case M.BOTTOM_RIGHT:t.bottom="0px",t.right="0px",t.top="auto",t.left="auto";break;case M.BOTTOM_LEFT:default:t.bottom="0px",t.left="0px",t.top="auto",t.right="auto"}Object.assign(this.torusIframe.style,t),this.isIframeFullScreen=e}_setupWeb3(){x.info("setupWeb3 running");let e=new BasePostMessageStream({name:"embed_metamask",target:"iframe_metamask",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),t=new BasePostMessageStream({name:"embed_comm",target:"iframe_comm",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),r=new TorusInpageProvider(e),detectAccountRequestPrototypeModifier=e=>{let t=r[e];r[e]=function(e){if(e&&"eth_requestAccounts"===e)return r.enable();for(var i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];return t.apply(this,[e,...n])}};detectAccountRequestPrototypeModifier("send"),detectAccountRequestPrototypeModifier("sendAsync"),r.enable=()=>new Promise((e,t)=>{r.sendAsync({jsonrpc:"2.0",id:getPreopenInstanceId(),method:"eth_requestAccounts",params:[]},(r,i)=>{let{result:n}=i||{};if(r)setTimeout(()=>{t(r)},50);else if(Array.isArray(n)&&n.length>0){let handleLoginCb=()=>{if(""!==this.requestedVerifier&&this.currentVerifier!==this.requestedVerifier){let{requestedVerifier:r}=this;this.logout().then(i=>{this.requestedVerifier=r,this._showLoginPopup(!0,e,t)}).catch(e=>t(e))}else e(n)};this.isLoggedIn?handleLoginCb():this.isLoginCallback=handleLoginCb}else this._showLoginPopup(!0,e,t)})}),r.tryPreopenHandle=(e,t)=>{if(!Array.isArray(e)&&F.includes(e.method)){let t=getPreopenInstanceId();this._handleWindow(t,{target:"_blank",features:j}),e.preopenInstanceId=t}r._rpcEngine.handle(e,t)};let i=new Proxy(r,{deleteProperty:()=>!0});this.ethereum=i;let n=function(e){let t=new ObjectMultiplex;return t.getStream=function(e){return this._substreams[e]?this._substreams[e]:this.createStream(e)},m()(e,t,e,e=>{e&&window.console.error(e)}),t}(t);this.communicationMux=n;let a=n.getStream("window");a.on("data",e=>{"create_window"===e.name&&this._createPopupBlockAlert(e.data.preopenInstanceId,e.data.url)});let o=n.getStream("widget");o.on("data",e=>{let{data:t}=e;this._displayIframe(t)});let s=n.getStream("status");s.on("data",e=>{e.loggedIn?(this.isLoggedIn=e.loggedIn,this.currentVerifier=e.verifier):this._displayIframe(),this.isLoginCallback&&(this.isLoginCallback(),delete this.isLoginCallback)}),this.provider=i,this.provider.shouldSendMetadata&&sendSiteMetadata(this.provider._rpcEngine),r._initializeState(),x.debug("Torus - injected provider")}_showLoginPopup(e,t,r){let loginHandler=e=>{let{err:i,selectedAddress:n}=e;i?(x.error(i),r&&r(i)):t&&t([n]),this.isIframeFullScreen&&this._displayIframe()},i=this.communicationMux.getStream("oauth");if(this.requestedVerifier){handleStream(i,"data",loginHandler);let t=getPreopenInstanceId();this._handleWindow(t),i.write({name:"oauth",data:{calledFromEmbed:e,verifier:this.requestedVerifier,preopenInstanceId:t,login_hint:this.loginHint}})}else this._displayIframe(!0),handleStream(i,"data",loginHandler),i.write({name:"oauth_modal",data:{calledFromEmbed:e}})}_createPopupBlockAlert(e,t){let r=this._getLogoUrl(),i=htmlToElement(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${r}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),n=htmlToElement(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),a=htmlToElement('<div id="torusAlert__btn-container"></div>');a.appendChild(n),i.appendChild(a),this._setEmbedWhiteLabel(i),this.torusAlertContainer.style.display="block",this.torusAlertContainer.appendChild(i),n.addEventListener("click",()=>{this._handleWindow(e,{url:t,target:"_blank",features:j}),i.remove(),0===this.torusAlertContainer.children.length&&(this.torusAlertContainer.style.display="none")})}};var $=r(85783),K=r(35796);let TorusWalletAdapter=class TorusWalletAdapter extends K.d{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),(0,n.Z)(this,"name",$.rW.TORUS_EVM),(0,n.Z)(this,"adapterNamespace",$.yk.EIP155),(0,n.Z)(this,"currentChainNamespace",$.EN.EIP155),(0,n.Z)(this,"type",$.hN.EXTERNAL),(0,n.Z)(this,"status",$.MP.NOT_READY),(0,n.Z)(this,"torusInstance",null),(0,n.Z)(this,"torusWalletOptions",void 0),(0,n.Z)(this,"initParams",void 0),(0,n.Z)(this,"loginSettings",{}),this.torusWalletOptions=e.adapterSettings||{},this.initParams=e.initParams||{},this.loginSettings=e.loginSettings||{}}get provider(){return this.status!==$.MP.NOT_READY&&this.torusInstance?this.torusInstance.provider:null}set provider(e){throw Error("Not implemented")}async init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await super.init(e),super.checkInitializationRequirements();let{chainId:t,blockExplorer:r,displayName:n,rpcTarget:a,ticker:o,tickerName:s}=this.chainConfig,l={chainId:Number.parseInt(t,16),host:a,blockExplorer:r,networkName:n,ticker:o,tickerName:s};this.torusInstance=new Torus(this.torusWalletOptions),$.cM.debug("initializing torus evm adapter init"),await this.torusInstance.init((0,i.Z)((0,i.Z)({showTorusButton:!1},this.initParams),{},{network:l})),this.status=$.MP.READY,this.emit($.n2.READY,$.rW.TORUS_EVM);try{$.cM.debug("initializing torus evm adapter"),e.autoConnect&&(this.rehydrated=!0,await this.connect())}catch(e){$.cM.error("Failed to connect with torus evm provider",e),this.emit($.n2.ERRORED,e)}}async connect(){if(super.checkConnectionRequirements(),!this.torusInstance)throw $.Ty.notReady("Torus wallet is not initialized");this.status=$.MP.CONNECTING,this.emit($.n2.CONNECTING,{adapter:$.rW.TORUS_EVM});try{await this.torusInstance.login(this.loginSettings);let e=await this.torusInstance.provider.request({method:"eth_chainId"});if(e&&parseInt(e)!==parseInt(this.chainConfig.chainId,16)){let{chainId:e,blockExplorer:t,displayName:r,rpcTarget:n,ticker:a,tickerName:o}=this.chainConfig,s={chainId:Number.parseInt(e,16),host:n,blockExplorer:t,networkName:r,tickerName:o,ticker:a};await this.torusInstance.setProvider((0,i.Z)({},s));let l=await this.torusInstance.ethereum.request({method:"eth_chainId"});if(l&&parseInt(l)!==parseInt(this.chainConfig.chainId,16))throw $.Ty.fromCode(5e3,`Not connected to correct chainId. Expected: ${this.chainConfig.chainId}, Current: ${l}`)}return this.status=$.MP.CONNECTED,this.torusInstance.showTorusButton(),this.emit($.MP.CONNECTED,{adapter:$.rW.TORUS_EVM,reconnected:this.rehydrated}),this.provider}catch(e){throw this.status=$.MP.READY,this.rehydrated=!1,this.emit($.MP.ERRORED,e),e instanceof $.up?e:$.RM.connectionError("Failed to login with torus wallet")}}async disconnect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cleanup:!1};if(await super.disconnectSession(),!this.torusInstance)throw $.Ty.notReady("Torus wallet is not initialized");await this.torusInstance.logout(),this.torusInstance.hideTorusButton(),e.cleanup?(this.status=$.MP.NOT_READY,this.torusInstance=null):this.status=$.MP.READY,await super.disconnect()}async getUserInfo(){if(this.status!==$.MP.CONNECTED)throw $.RM.notConnectedError("Not connected with wallet");if(!this.torusInstance)throw $.Ty.notReady("Torus wallet is not initialized");let e=await this.torusInstance.getUserInfo("");return e}async addChain(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super.checkAddChainRequirements(e,t),this.addChainConfig(e)}async switchChain(e){var t;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super.checkSwitchChainRequirements(e,r);let i=this.getChainConfig(e.chainId);await (null===(t=this.torusInstance)||void 0===t?void 0:t.setProvider({host:i.rpcTarget,chainId:parseInt(i.chainId,16),networkName:i.displayName,blockExplorer:i.blockExplorer,ticker:i.ticker,tickerName:i.tickerName})),this.setAdapterSettings({chainConfig:this.getChainConfig(e.chainId)})}}},64063:function(e){"use strict";e.exports=function equal(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){if((r=e.length)!=t.length)return!1;for(i=r;0!=i--;)if(!equal(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if((r=(n=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(t,n[i]))return!1;for(i=r;0!=i--;){var r,i,n,a=n[i];if(!equal(e[a],t[a]))return!1}return!0}return e!=e&&t!=t}}}]);